<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>The Unix Shell: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="manifest" href="../site.webmanifest">
<link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav carpentries"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="The Carpentries" src="../assets/images/carpentries-logo.svg">
</div>
    </div>
    <div class="selector-container">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav carpentries" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="The Carpentries" src="../assets/images/carpentries-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      The Unix Shell
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
      <i role="img" aria-label="search button" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            The Unix Shell
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"></ul>
</li>
      </ul>
</div>
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
<input class="form-control me-2 searchbox" type="search" placeholder="Search" aria-label="Search"><button class="btn btn-outline-success tablet-search-button" type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="search button"></i>
        </button>
      </fieldset>
</form>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  The Unix Shell
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress carpentries">
    <div class="progress-bar carpentries" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->
      
            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-intro.html">1. Introducing the Shell</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-filedir.html">2. Navigating Files and Directories</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-create.html">3. Working With Files and Directories</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-pipefilter.html">4. Pipes and Filters</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-script.html">5. Shell Scripts</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-loop.html">6. Loops</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-find.html">7. Finding Things</a>
    </div>
<!--/div.accordion-header-->
        
  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width resources">
<a href="../instructor/aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">
            
            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-intro"><p>Content from <a href="01-intro.html">Introducing the Shell</a></p>
<hr>
<p> Last updated on 2023-11-21 | 
        
        <a href="https://github.com/zkamvar/mdf-shell-novice/edit/main/episodes/01-intro.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 5 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is a command shell and why would I use one?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain how the shell relates to the keyboard, the screen, the
operating system, and users’ programs.</li>
<li>Explain when and why command-line interfaces should be used instead
of graphical interfaces.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h3>
<p>At a high level, computers do four things:</p>
<ul>
<li>run programs</li>
<li>store data</li>
<li>communicate with each other, and</li>
<li>interact with us</li>
</ul>
<p>Computers can interact with us in many different ways, such as
through a keyboard and mouse, touch screen interfaces, or using speech
recognition systems. While touch and voice interfaces are becoming more
commonplace, most interaction is still done using traditional screens,
mice, touchpads and keyboards.</p>
<p>The <strong>graphical user interface</strong> (GUI) is the most
widely used way to interact with personal computers. We give
instructions (to run a program, to copy a file, to create a new
folder/directory) with the convenience of a few mouse clicks. This way
of interacting with a computer is intuitive and very easy to learn. But
this way of giving instructions to a computer scales very poorly if we
are to give a large stream of instructions even if they are similar or
identical. For example if we have to copy the third line of each of a
thousand text files stored in a thousand different directories and paste
it into a single file line by line. Using the traditional GUI approach
of clicks will take several hours to do this.</p>
<p>This is where we take advange of the shell - a <strong>command-line
interface</strong> to make such repetitive tasks automatic and fast. It
can take a single instruction and repeat it as is or with some
modification as many times as we want. The task in the example above can
be accomplished in a few minutes at most.</p>
<p>The heart of a command-line interface is a
<strong>read-evaluate-print loop</strong> (REPL). It is called so
because when you type a command and press <kbd>Return</kbd> (also known
as <kbd>Enter</kbd>) the shell reads your command, evaluates (or
‘executes’) it, prints the output of your command, loops back and waits
for you to enter another command.</p>
</div>
<div class="section level3">
<h3 id="the-shell">The Shell<a class="anchor" aria-label="anchor" href="#the-shell"></a>
</h3>
<p>The Shell is a program which runs other programs rather than doing
calculations itself. Those programs can be as complicated as climate
modeling software and as simple as a program that creates a new
directory. The simple programs which are used to perform stand alone
tasks are usually refered to as commands. The most popular Unix shell is
Bash, (the Bourne Again SHell — so-called because it’s derived from a
shell written by Stephen Bourne). Bash is the default shell on most
modern implementations of Unix and in most packages that provide
Unix-like tools for Windows.</p>
<p>When the shell is first opened, you are presented with a
<strong>prompt</strong>, indicating that the shell is waiting for
input.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span></span></code></pre>
</div>
<p>The shell typically uses <code>$</code> as the prompt, but may use a
different symbol. In the examples for this lesson, we’ll show the prompt
as <code>$</code>. Most importantly: when typing commands, either from
these lessons or from other sources, <em>do not type the prompt</em>,
only the commands that follow it.</p>
<p>So let’s try our first command, which will list the contents of the
current directory:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Desktop     Downloads   Movies      Pictures
Documents   Library     Music       Public</code></pre>
</div>
<div id="command-not-found" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="command-not-found" class="callout-inner">
<h3 class="callout-title">Command not found<a class="anchor" aria-label="anchor" href="#command-not-found"></a>
</h3>
<div class="callout-content">
<p>If the shell can’t find a program whose name is the command you
typed, it will print an error message such as:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ks</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ks: command not found</code></pre>
</div>
<p>Usually this means that you have mis-typed the command.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="is-it-difficult">Is it difficult?<a class="anchor" aria-label="anchor" href="#is-it-difficult"></a>
</h3>
<p>It is a different model of interacting than a GUI, and that will take
some effort - and some time - to learn. A GUI presents you with choices
and you select one. With a <strong>command line interface</strong> (CLI)
the choices are combinations of commands and parameters, more like words
in a language than buttons on a screen. They are not presented to you so
you must learn a few, like learning some vocabulary in a new language.
But a small number of commands gets you a long way, and we’ll cover
those essential few today.</p>
</div>
<div class="section level3">
<h3 id="flexibility-and-automation">Flexibility and automation<a class="anchor" aria-label="anchor" href="#flexibility-and-automation"></a>
</h3>
<p>The grammar of a shell allows you to combine existing tools into
powerful pipelines and handle large volumes of data automatically.
Sequences of commands can be written into a <em>script</em>, improving
the reproducibility of workflows and allowing you to repeat them
easily.</p>
<p>In addition, the command line is often the easiest way to interact
with remote machines and supercomputers. Familiarity with the shell is
near essential to run a variety of specialized tools and resources
including high-performance computing systems. As clusters and cloud
computing systems become more popular for scientific data crunching,
being able to interact with the shell is becoming a necessary skill. We
can build on the command-line skills covered here to tackle a wide range
of scientific questions and computational challenges.</p>
</div>
<section id="nelles-pipeline-a-typical-problem"><h2 class="section-heading">Nelle’s Pipeline: A Typical Problem<a class="anchor" aria-label="anchor" href="#nelles-pipeline-a-typical-problem"></a>
</h2>
<hr class="half-width">
<p>Nelle Nemo, a marine biologist, has just returned from a six-month
survey of the <a href="https://en.wikipedia.org/wiki/North_Pacific_Gyre" class="external-link">North Pacific
Gyre</a>, where she has been sampling gelatinous marine life in the <a href="https://en.wikipedia.org/wiki/Great_Pacific_Garbage_Patch" class="external-link">Great
Pacific Garbage Patch</a>. She has 1520 samples in all and now needs
to:</p>
<ol style="list-style-type: decimal">
<li>Run each sample through an assay machine that will measure the
relative abundance of 300 different proteins. The machine’s output for a
single sample is a file with one line for each protein.</li>
<li>Calculate statistics for each of the proteins separately using a
program her supervisor wrote called <code>goostats</code>.</li>
<li>Write up results. Her supervisor would really like her to do this by
the end of the month so that her paper can appear in an upcoming special
issue of <em>Aquatic Goo Letters</em>.</li>
</ol>
<p>It takes her about two weeks to run her samples by the assay machine.
Now she has the daunting task of analysing her results by running
‘goostats’. The bad news is that if she has to run <code>goostats</code>
by hand using a GUI, she’ll have to select a file using an open file
dialog 1520 times. At 30 seconds per sample, the whole process will take
more than 12 hours (and that’s assuming the best-case scenario where she
is ready to select the next file as soon as the previous sample analysis
has finished). This zero-breaks always-ready scenario is only achievable
by a machine so it would likely take much longer than 12 hours, not to
mention that the chances of her selecting all of those files correctly
are practically zero. Missing that paper deadline is looking
increasingly likely.</p>
<p>The next few lessons will explore what she should do instead. More
specifically, they explain how she can use a command shell to run the
<code>goostats</code> program, using loops to automate the repetitive
steps e.g. entering file names, so that her computer can work 24 hours a
day while she writes her paper.</p>
<p>As a bonus, once she has put a processing pipeline together, she will
be able to use it again whenever she collects more data.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>A shell is a program whose primary purpose is to read commands and
run other programs.</li>
<li>The shell’s main advantages are its high action-to-keystroke ratio,
its support for automating repetitive tasks, and its capacity to access
networked machines.</li>
<li>The shell’s main disadvantages are its primarily textual nature and
how cryptic its commands and operation can be.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-02-filedir"><p>Content from <a href="02-filedir.html">Navigating Files and Directories</a></p>
<hr>
<p> Last updated on 2023-11-21 | 
        
        <a href="https://github.com/zkamvar/mdf-shell-novice/edit/main/episodes/02-filedir.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 40 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I move around on my computer?</li>
<li>How can I see what files and directories I have?</li>
<li>How can I specify the location of a file or directory on my
computer?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Explain the similarities and differences between a file and a
directory.</li>
<li>Translate an absolute path into a relative path and vice versa.</li>
<li>Construct absolute and relative paths that identify specific files
and directories.</li>
<li>Demonstrate the use of tab completion, and explain its
advantages.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>The part of the operating system responsible for managing files and
directories is called the <strong>file system</strong>. It organizes our
data into files, which hold information, and directories (also called
‘folders’), which hold files or other directories.</p>
<p>Several commands are frequently used to create, inspect, rename, and
delete files and directories. To start exploring them, we’ll go to our
open shell window.</p>
<p>First let’s find out where we are by running a command called
<code>pwd</code> (which stands for ‘print working directory’).
Directories are like <em>places</em> - at any time while we are using
the shell we are in exactly one place, called our <strong>current
working directory</strong>. Commands mostly read and write files in the
current working directory, i.e. ‘here’, so knowing where you are before
running a command is important. <code>pwd</code> shows you where you
are:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle</code></pre>
</div>
<p>Here, the computer’s response is <code>/Users/nelle</code>, which is
Nelle’s <strong>home directory</strong>:</p>
<div id="home-directory-variation" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="home-directory-variation" class="callout-inner">
<h3 class="callout-title">Home Directory Variation<a class="anchor" aria-label="anchor" href="#home-directory-variation"></a>
</h3>
<div class="callout-content">
<p>The home directory path will look different on different operating
systems. On Linux it may look like <code>/home/nelle</code>, and on
Windows it will be similar to
<code>C:\Documents and Settings\nelle</code> or
<code>C:\Users\nelle</code>. (Note that it may look slightly different
for different versions of Windows.) In future examples, we’ve used Mac
output as the default - Linux and Windows output may differ slightly,
but should be generally similar.</p>
</div>
</div>
</div>
<p>To understand what a ‘home directory’ is, let’s have a look at how
the file system as a whole is organized. For the sake of this example,
we’ll be illustrating the filesystem on our scientist Nelle’s computer.
After this illustration, you’ll be learning commands to explore your own
filesystem, which will be constructed in a similar way, but not be
exactly identical.</p>
<p>On Nelle’s computer, the filesystem looks like this:</p>
<figure><img src="../fig/filesystem.svg" alt="The File System" class="figure mx-auto d-block"></figure><p>At the top is the <strong>root directory</strong> that holds
everything else. We refer to it using a slash character, <code>/</code>,
on its own; this is the leading slash in <code>/Users/nelle</code>.</p>
<p>Inside that directory are several other directories: <code>bin</code>
(which is where some built-in programs are stored), <code>data</code>
(for miscellaneous data files), <code>Users</code> (where users’
personal directories are located), <code>tmp</code> (for temporary files
that don’t need to be stored long-term), and so on.</p>
<p>We know that our current working directory <code>/Users/nelle</code>
is stored inside <code>/Users</code> because <code>/Users</code> is the
first part of its name. Similarly, we know that <code>/Users</code> is
stored inside the root directory <code>/</code> because its name begins
with <code>/</code>.</p>
<div id="slashes" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="slashes" class="callout-inner">
<h3 class="callout-title">Slashes<a class="anchor" aria-label="anchor" href="#slashes"></a>
</h3>
<div class="callout-content">
<p>Notice that there are two meanings for the <code>/</code> character.
When it appears at the front of a file or directory name, it refers to
the root directory. When it appears <em>inside</em> a name, it’s just a
separator.</p>
</div>
</div>
</div>
<p>Underneath <code>/Users</code>, we find one directory for each user
with an account on Nelle’s machine, her colleagues <em>imhotep</em> and
<em>larry</em>.</p>
<figure><img src="../fig/home-directories.svg" alt="Home Directories" class="figure mx-auto d-block"></figure><p>The user <em>imhotep</em>’s files are stored in
<code>/Users/imhotep</code>, user <em>larry</em>’s in
<code>/Users/larry</code>, and Nelle’s in <code>/Users/nelle</code>.
Because Nelle is the user in our examples here, this is why we get
<code>/Users/nelle</code> as our home directory. Typically, when you
open a new command prompt you will be in your home directory to
start.</p>
<p>Now let’s learn the command that will let us see the contents of our
own filesystem. We can see what’s in our home directory by running
<code>ls</code>, which stands for ‘listing’:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Applications Documents    Library      Music        Public
Desktop      Downloads    Movies       Pictures     data-shell</code></pre>
</div>
<p>Most operating systems give color output for the <code>ls</code>
command. Directories, files, executables can be easiliy differentiated
based on their color. In case your are not getting color output for the
<code>ls</code> command then add a flag <code>-F</code> to
<code>ls</code>. This will add a trailing forward-slash at the end of
the output names:</p>
<ul>
<li>a trailing <code>/</code> indicates that this is a directory</li>
<li>
<code>@</code> indicates a link</li>
<li>
<code>*</code> indicates an executable</li>
</ul>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Applications/ Documents/    Library/      Music/        Public/
Desktop/      Downloads/    Movies/       Pictures/     data-shell/</code></pre>
</div>
<p>Here, we can see that our home directory contains mostly
<strong>sub-directories</strong>. Any names in your output that don’t
have a classification symbol, are plain old <strong>files</strong> or
<strong>executables</strong>.</p>
<section id="general-syntax-of-a-shell-command"><h2 class="section-heading">General syntax of a shell command<a class="anchor" aria-label="anchor" href="#general-syntax-of-a-shell-command"></a>
</h2>
<hr class="half-width">
<p>Consider the command below as a general example of a command, which
we will dissect into its component parts:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls [-OPTION] [FILE] </span></code></pre>
</div>
<p>By default, FILE is the current director, However, once can specify
the path to directory we want to see the content, Let’s say we want to
see the content of the <code>/</code> director:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> /</span></code></pre>
</div>
<p><code>ls</code> is the <strong>command</strong>, with an
<strong>option</strong> <code>-F</code> and an <strong>argument</strong>
<code>/</code>. We’ve already encountered options (also called
<strong>switches</strong> or <strong>flags</strong>) which either start
with a single dash (<code>-</code>) or two dashes (<code>--</code>), and
they change the behaviour of a command. Arguments tell the command what
to operate on (e.g. files and directories). Sometimes options and
arguments are referred to as <strong>parameters</strong>. A command can
be called with more than one option and more than one argument: but a
command doesn’t always require an argument or an option.</p>
<p>Each part is separated by spaces: if you omit the space between
<code>ls</code> and <code>-F</code> the shell will look for a command
called <code>ls-F</code>, which doesn’t exist. Also, capitalization can
be important: <code>ls -r</code> is different to <code>ls -R</code>.</p>
<p>Putting all that together, our command above gives us a listing of
files and directories in the root directory <code>/</code>. An example
of the output you might get from the above command is given below:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>$ ls -F /
Applications/         System/    
Library/              Users/
Network/              Volumes/</code></pre>
</div>
<div class="section level3">
<h3 id="getting-help">Getting help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h3>
<p><code>ls</code> has lots of other <strong>options</strong>. There are
two common ways to find out how to use a command and what options it
accepts:</p>
<ol style="list-style-type: decimal">
<li>We can pass a <code>--help</code> option to the command, such
as:</li>
</ol>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">--help</span></span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>We can read its manual with <code>man</code>, such as:</li>
</ol>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> man ls</span></code></pre>
</div>
<p><strong>Depending on your environment you might find that only one of
these works (either <code>man</code> or <code>--help</code>).</strong>
We’ll describe both ways below.</p>
<div class="section level4">
<h4 id="the---help-option">The <code>--help</code> option<a class="anchor" aria-label="anchor" href="#the---help-option"></a>
</h4>
<p>Many bash commands, and programs that people have written that can be
run from within bash, support a <code>--help</code> option to display
more information on how to use the command or program.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">--help</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Usage: ls [OPTION]... [FILE]...
List information about the FILEs (the current directory by default).
Sort entries alphabetically if none of -cftuvSUX nor --sort is specified.

Mandatory arguments to long options are mandatory for short options too.
  -a, --all                  do not ignore entries starting with .
  -A, --almost-all           do not list implied . and ..
      --author               with -l, print the author of each file
  -b, --escape               print C-style escapes for nongraphic characters
      --block-size=SIZE      scale sizes by SIZE before printing them; e.g.,
                               '--block-size=M' prints sizes in units of
                               1,048,576 bytes; see SIZE format below
  -B, --ignore-backups       do not list implied entries ending with ~
  -c                         with -lt: sort by, and show, ctime (time of last
                               modification of file status information);
                               with -l: show ctime and sort by name;
                               otherwise: sort by ctime, newest first
  -C                         list entries by columns
      --color[=WHEN]         colorize the output; WHEN can be 'always' (default
                               if omitted), 'auto', or 'never'; more info below
  -d, --directory            list directories themselves, not their contents
  -D, --dired                generate output designed for Emacs' dired mode
  -f                         do not sort, enable -aU, disable -ls --color
  -F, --classify             append indicator (one of */=&gt;@|) to entries
      --file-type            likewise, except do not append '*'
      --format=WORD          across -x, commas -m, horizontal -x, long -l,
                               single-column -1, verbose -l, vertical -C
      --full-time            like -l --time-style=full-iso
  -g                         like -l, but do not list owner
      --group-directories-first
                             group directories before files;
                               can be augmented with a --sort option, but any
                               use of --sort=none (-U) disables grouping
  -G, --no-group             in a long listing, don't print group names
  -h, --human-readable       with -l and/or -s, print human readable sizes
                               (e.g., 1K 234M 2G)
      --si                   likewise, but use powers of 1000 not 1024
  -H, --dereference-command-line
                             follow symbolic links listed on the command line
      --dereference-command-line-symlink-to-dir
                             follow each command line symbolic link
                               that points to a directory
      --hide=PATTERN         do not list implied entries matching shell PATTERN
                               (overridden by -a or -A)
      --indicator-style=WORD  append indicator with style WORD to entry names:
                               none (default), slash (-p),
                               file-type (--file-type), classify (-F)
  -i, --inode                print the index number of each file
  -I, --ignore=PATTERN       do not list implied entries matching shell PATTERN
  -k, --kibibytes            default to 1024-byte blocks for disk usage
  -l                         use a long listing format
  -L, --dereference          when showing file information for a symbolic
                               link, show information for the file the link
                               references rather than for the link itself
  -m                         fill width with a comma separated list of entries
  -n, --numeric-uid-gid      like -l, but list numeric user and group IDs
  -N, --literal              print raw entry names (don't treat e.g. control
                               characters specially)
  -o                         like -l, but do not list group information
  -p, --indicator-style=slash
                             append / indicator to directories
  -q, --hide-control-chars   print ? instead of nongraphic characters
      --show-control-chars   show nongraphic characters as-is (the default,
                               unless program is 'ls' and output is a terminal)
  -Q, --quote-name           enclose entry names in double quotes
      --quoting-style=WORD   use quoting style WORD for entry names:
                               literal, locale, shell, shell-always,
                               shell-escape, shell-escape-always, c, escape
  -r, --reverse              reverse order while sorting
  -R, --recursive            list subdirectories recursively
  -s, --size                 print the allocated size of each file, in blocks
  -S                         sort by file size, largest first
      --sort=WORD            sort by WORD instead of name: none (-U), size (-S),
                               time (-t), version (-v), extension (-X)
      --time=WORD            with -l, show time as WORD instead of default
                               modification time: atime or access or use (-u);
                               ctime or status (-c); also use specified time
                               as sort key if --sort=time (newest first)
      --time-style=STYLE     with -l, show times using style STYLE:
                               full-iso, long-iso, iso, locale, or +FORMAT;
                               FORMAT is interpreted like in 'date'; if FORMAT
                               is FORMAT1&lt;newline&gt;FORMAT2, then FORMAT1 applies
                               to non-recent files and FORMAT2 to recent files;
                               if STYLE is prefixed with 'posix-', STYLE
                               takes effect only outside the POSIX locale
  -t                         sort by modification time, newest first
  -T, --tabsize=COLS         assume tab stops at each COLS instead of 8
  -u                         with -lt: sort by, and show, access time;
                               with -l: show access time and sort by name;
                               otherwise: sort by access time, newest first
  -U                         do not sort; list entries in directory order
  -v                         natural sort of (version) numbers within text
  -w, --width=COLS           set output width to COLS.  0 means no limit
  -x                         list entries by lines instead of by columns
  -X                         sort alphabetically by entry extension
  -Z, --context              print any security context of each file
  -1                         list one file per line.  Avoid '\n' with -q or -b
      --help     display this help and exit
      --version  output version information and exit

The SIZE argument is an integer and optional unit (example: 10K is 10*1024).
Units are K,M,G,T,P,E,Z,Y (powers of 1024) or KB,MB,... (powers of 1000).

Using color to distinguish file types is disabled both by default and
with --color=never.  With --color=auto, ls emits color codes only when
standard output is connected to a terminal.  The LS_COLORS environment
variable can change the settings.  Use the dircolors command to set it.

Exit status:
 0  if OK,
 1  if minor problems (e.g., cannot access subdirectory),
 2  if serious trouble (e.g., cannot access command-line argument).

GNU coreutils online help: &lt;http://www.gnu.org/software/coreutils/&gt;
Full documentation at: &lt;http://www.gnu.org/software/coreutils/ls&gt;
or available locally via: info '(coreutils) ls invocation'</code></pre>
</div>
<div id="unsupported-command-line-options" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="unsupported-command-line-options" class="callout-inner">
<h3 class="callout-title">Unsupported command-line options<a class="anchor" aria-label="anchor" href="#unsupported-command-line-options"></a>
</h3>
<div class="callout-content">
<p>If you try to use an option (flag) that is not supported,
<code>ls</code> and other commands will usually print an error message
similar to:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-j</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>ls: invalid option -- 'j'
Try 'ls --help' for more information.</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level4">
<h4 id="the-man-command">The <code>man</code> command<a class="anchor" aria-label="anchor" href="#the-man-command"></a>
</h4>
<p>The other way to learn about <code>ls</code> is to type</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> man ls</span></code></pre>
</div>
<p>This will turn your terminal into a page with a description of the
<code>ls</code> command and its options and, if you’re lucky, some
examples of how to use it.</p>
<p>To navigate through the <code>man</code> pages, you may use
<kbd>↑</kbd> and <kbd>↓</kbd> to move line-by-line, or try <kbd>B</kbd>
and <kbd>Spacebar</kbd> to skip up and down by a full page. To search
for a character or word in the <code>man</code> pages, use <kbd>/</kbd>
followed by the character or word you are searching for. Sometimes a
search will result in multiple hits. If so, you can move between hits
using <kbd>N</kbd> (for moving forward) and
<kbd>Shift</kbd>+<kbd>N</kbd> (for moving backward).</p>
<p>To <strong>quit</strong> the <code>man</code> pages, press
<kbd>Q</kbd>.</p>
<div id="manual-pages-on-the-web" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="manual-pages-on-the-web" class="callout-inner">
<h3 class="callout-title">Manual pages on the web<a class="anchor" aria-label="anchor" href="#manual-pages-on-the-web"></a>
</h3>
<div class="callout-content">
<p>Of course there is a third way to access help for commands: searching
the internet via your web browser. When using internet search, including
the phrase <code>unix man page</code> in your search query will help to
find relevant results.</p>
<p>GNU provides links to its <a href="https://www.gnu.org/manual/manual.html" class="external-link">manuals</a> including the
<a href="https://www.gnu.org/software/coreutils/manual/coreutils.html" class="external-link">core
GNU utilities</a>, which covers many commands introduced within this
lesson.</p>
</div>
</div>
</div>
<div id="exploring-more-ls-flags" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="exploring-more-ls-flags" class="callout-inner">
<h3 class="callout-title">Exploring More <code>ls</code> Flags<a class="anchor" aria-label="anchor" href="#exploring-more-ls-flags"></a>
</h3>
<div class="callout-content">
<p>You can also use two options at the same time. What does the command
<code>ls</code> do when used with the <code>-l</code> option? What about
if you use both the <code>-l</code> and the <code>-h</code> option?</p>
<p>Some of its output is about properties that we do not cover in this
lesson (such as file permissions and ownership), but the rest should be
useful nevertheless.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>The <code>-l</code> option makes <code>ls</code> use a
<strong>l</strong>ong listing format, showing not only the
file/directory names but also additional information such as the file
size and the time of its last modification. If you use both the
<code>-h</code> option and the <code>-l</code> option, this makes the
file size ‘<strong>h</strong>uman readable’, i.e. displaying something
like <code>5.3K</code> instead of <code>5369</code>.</p>
</div>
</div>
</div>
</div>
<div id="listing-in-reverse-chronological-order" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="listing-in-reverse-chronological-order" class="callout-inner">
<h3 class="callout-title">Listing in Reverse Chronological Order<a class="anchor" aria-label="anchor" href="#listing-in-reverse-chronological-order"></a>
</h3>
<div class="callout-content">
<p>By default <code>ls</code> lists the contents of a directory in
alphabetical order by name. The command <code>ls -t</code> lists items
by time of last change instead of alphabetically. The command
<code>ls -r</code> lists the contents of a directory in reverse order.
Which file is displayed last when you combine the <code>-t</code> and
<code>-r</code> flags? Hint: You may need to use the <code>-l</code>
flag to see the last changed dates.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>The most recently changed file is listed last when using
<code>-rt</code>. This can be very useful for finding your most recent
edits or checking to see if a new output file was written.</p>
</div>
</div>
</div>
</div>
<p>We can also use <code>ls</code> to see the contents of a different
directory. Let’s take a look at our <code>data-shell</code> directory by
typing <code>ls data-shell</code>, i.e., we want a listing of something
other than our current working directory:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ls data-shell/</code></pre>
</div>
<p>Your output should be a list of all the files in the
<code>data-shell</code> directory you downloaded at the <a href="index.html#setup">setup for this lesson</a>. Take a look at your Home to
confirm that your output is accurate.</p>
<p>As you may now see, using a bash shell is strongly dependent on the
idea that your files are organized in a hierarchical file system.
Organizing things hierarchically in this way helps us keep track of our
work: it’s possible to put hundreds of files in our home directory, just
as it’s possible to pile hundreds of printed papers on our desk, but
it’s a self-defeating strategy.</p>
<p>Now that we know the <code>data-shell</code> directory is located in
our home directory, we can do two things.</p>
<p>First, we can look at its contents, using the same strategy as
before, passing a directory name to <code>ls</code>:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls data-shell</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>creatures          molecules          notes.txt           solar.pdf
data               north-pacific-gyre pizza.cfg           writing</code></pre>
</div>
<p>Second, we can actually change our location to a different directory,
so we are no longer located in our home directory.</p>
</div>
</div>
<div class="section level3">
<h3 id="changing-directory-cd">Changing Directory: cd<a class="anchor" aria-label="anchor" href="#changing-directory-cd"></a>
</h3>
<p>The command to change locations is <code>cd</code> followed by a
directory name to change our working directory. <code>cd</code> stands
for ‘change directory’, which is a bit misleading: the command doesn’t
change the directory, it changes the shell’s idea of what directory we
are in.</p>
<p>Let’s say we want to move to the <code>data</code> directory we saw
above. We can use the following series of commands to get there:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd data-shell</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd data</span></code></pre>
</div>
<p>These commands will move us from our home directory into the
<code>data-shell</code> directory, then into the <code>data</code>
directory. You will notice that <code>cd</code> doesn’t print anything.
This is normal. Many shell commands will not output anything to the
screen when successfully executed.<br>
But if we run <code>pwd</code> after it, we can see that we are now in
<code>/Users/nelle/data-shell/data</code>. If we run <code>ls</code>
without arguments now, it lists the contents of
<code>/Users/nelle/data-shell/data</code>, because that’s where we now
are:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle/data-shell/data</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>amino-acids.txt   elements     pdb	        salmon.txt
animals.txt       morse.txt    planets.txt  sunspot.txt</code></pre>
</div>
<p>We now know how to go down the directory tree, but how do we go up?
We might try the following:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd data-shell</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>-bash: cd: data-shell: No such file or directory</code></pre>
</div>
<p>But we get an error! Why is this?</p>
<p>With our methods so far, <code>cd</code> can only see sub-directories
inside your current directory. There are different ways to see
directories above your current location; we’ll start with the
simplest.</p>
<p>There is a shortcut in the shell to move up one directory level that
looks like this:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd ..</span></code></pre>
</div>
<p><code>..</code> is a special directory name meaning “the directory
containing this one”, or more succinctly, the <strong>parent</strong> of
the current directory. Sure enough, if we run <code>pwd</code> after
running <code>cd ..</code>, we’re back in
<code>/Users/nelle/data-shell</code>:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle/data-shell</code></pre>
</div>
<p>The special directory <code>..</code> doesn’t usually show up when we
run <code>ls</code>. If we want to display it, we can give
<code>ls</code> the <code>-a</code> option:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="at">-F</span> <span class="at">-a</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>./   .bash_profile  data/       north-pacific-gyre/  pizza.cfg  thesis/
../  creatures/     molecules/  notes.txt            solar.pdf  writing/</code></pre>
</div>
<p><code>-a</code> stands for ‘show all’; it forces <code>ls</code> to
show us file and directory names that begin with <code>.</code>, such as
<code>..</code> (which, if we’re in <code>/Users/nelle</code>, refers to
the <code>/Users</code> directory) As you can see, it also displays
another special directory that’s just called <code>.</code>, which means
‘the current working directory’. It may seem redundant to have a name
for it, but we’ll see some uses for it soon.</p>
<p>Note that in most command line tools, multiple options can be
combined with a single <code>-</code> and no spaces between the options:
<code>ls -F -a</code> is equivalent to <code>ls -Fa</code>.</p>
<div id="other-hidden-files" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="other-hidden-files" class="callout-inner">
<h3 class="callout-title">Other Hidden Files<a class="anchor" aria-label="anchor" href="#other-hidden-files"></a>
</h3>
<div class="callout-content">
<p>In addition to the hidden directories <code>..</code> and
<code>.</code>, you may also see a file called
<code>.bash_profile</code>. This file usually contains shell
configuration settings. You may also see other files and directories
beginning with <code>.</code>. These are usually files and directories
that are used to configure different programs on your computer. The
prefix <code>.</code> is used to prevent these configuration files from
cluttering the terminal when a standard <code>ls</code> command is
used.</p>
</div>
</div>
</div>
<div id="orthogonality" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="orthogonality" class="callout-inner">
<h3 class="callout-title">Orthogonality<a class="anchor" aria-label="anchor" href="#orthogonality"></a>
</h3>
<div class="callout-content">
<p>The special names <code>.</code> and <code>..</code> don’t belong to
<code>cd</code>; they are interpreted the same way by every program. For
example, if we are in <code>/Users/nelle/data</code>, the command
<code>ls ..</code> will give us a listing of <code>/Users/nelle</code>.
When the meanings of the parts are the same no matter how they’re
combined, programmers say they are <strong>orthogonal</strong>:
Orthogonal systems tend to be easier for people to learn because there
are fewer special cases and exceptions to keep track of.</p>
</div>
</div>
</div>
<p>These then, are the basic commands for navigating the filesystem on
your computer: <code>pwd</code>, <code>ls</code> and <code>cd</code>.
Let’s explore some variations on those commands. What happens if you
type <code>cd</code> on its own, without giving a directory?</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd</span></code></pre>
</div>
<p>How can you check what happened? <code>pwd</code> gives us the
answer!</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle</code></pre>
</div>
<p>It turns out that <code>cd</code> without an argument will return you
to your home directory, which is great if you’ve gotten lost in your own
filesystem.</p>
<p>Let’s try returning to the <code>data</code> directory from before.
Last time, we used three commands, but we can actually string together
the list of directories to move to <code>data</code> in one step:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd data-shell/data</span></code></pre>
</div>
<p>Check that we’ve moved to the right place by running <code>pwd</code>
and <code>ls -F</code></p>
<p>If we want to move up one level from the data directory, we could use
<code>cd ..</code>. But there is another way to move to any directory,
regardless of your current location.</p>
<p>So far, when specifying directory names, or even a directory path (as
above), we have been using <strong>relative paths</strong>. When you use
a relative path with a command like <code>ls</code> or <code>cd</code>,
it tries to find that location from where we are, rather than from the
root of the file system.</p>
<p>However, it is possible to specify the <strong>absolute path</strong>
to a directory by including its entire path from the root directory,
which is indicated by a leading slash. The leading <code>/</code> tells
the computer to follow the path from the root of the file system, so it
always refers to exactly one directory, no matter where we are when we
run the command.</p>
<p>This allows us to move to our <code>data-shell</code> directory from
anywhere on the filesystem (including from inside <code>data</code>). To
find the absolute path we’re looking for, we can use <code>pwd</code>
and then extract the piece we need to move to
<code>data-shell</code>.</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/nelle/data-shell/data</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd /Users/nelle/data-shell</span></code></pre>
</div>
<p>Run <code>pwd</code> and <code>ls -F</code> to ensure that we’re in
the directory we expect.</p>
<div id="two-more-shortcuts" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="two-more-shortcuts" class="callout-inner">
<h3 class="callout-title">Two More Shortcuts<a class="anchor" aria-label="anchor" href="#two-more-shortcuts"></a>
</h3>
<div class="callout-content">
<p>The shell interprets the character <code>~</code> (tilde) at the
start of a path to mean “the current user’s home directory”. For
example, if Nelle’s home directory is <code>/Users/nelle</code>, then
<code>~/data</code> is equivalent to <code>/Users/nelle/data</code>.
This only works if it is the first character in the path:
<code>here/there/~/elsewhere</code> is <em>not</em>
<code>here/there/Users/nelle/elsewhere</code>.</p>
<p>Another shortcut is the <code>-</code> (dash) character.
<code>cd</code> will translate <code>-</code> into <em>the previous
directory I was in</em>, which is faster than having to remember, then
type, the full path. This is a <em>very</em> efficient way of moving
back and forth between directories. The difference between
<code>cd ..</code> and <code>cd -</code> is that the former brings you
<em>up</em>, while the latter brings you <em>back</em>. You can think of
it as the <em>Last Channel</em> button on a TV remote.</p>
</div>
</div>
</div>
<div id="absolute-vs-relative-paths" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="absolute-vs-relative-paths" class="callout-inner">
<h3 class="callout-title">Absolute vs Relative Paths<a class="anchor" aria-label="anchor" href="#absolute-vs-relative-paths"></a>
</h3>
<div class="callout-content">
<p>Starting from <code>/Users/amanda/data</code>, which of the following
commands could Amanda use to navigate to her home directory, which is
<code>/Users/amanda</code>?</p>
<ol style="list-style-type: decimal">
<li><code>cd .</code></li>
<li><code>cd /</code></li>
<li><code>cd /home/amanda</code></li>
<li><code>cd ../..</code></li>
<li><code>cd ~</code></li>
<li><code>cd home</code></li>
<li><code>cd ~/data/..</code></li>
<li><code>cd</code></li>
<li><code>cd ..</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>No: <code>.</code> stands for the current directory.</li>
<li>No: <code>/</code> stands for the root directory.</li>
<li>No: Amanda’s home directory is <code>/Users/amanda</code>.</li>
<li>No: this goes up two levels, i.e. ends in <code>/Users</code>.</li>
<li>Yes: <code>~</code> stands for the user’s home directory, in this
case <code>/Users/amanda</code>.</li>
<li>No: this would navigate into a directory <code>home</code> in the
current directory if it exists.</li>
<li>Yes: unnecessarily complicated, but correct.</li>
<li>Yes: shortcut to go back to the user’s home directory.</li>
<li>Yes: goes up one level.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="relative-path-resolution" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="relative-path-resolution" class="callout-inner">
<h3 class="callout-title">Relative Path Resolution<a class="anchor" aria-label="anchor" href="#relative-path-resolution"></a>
</h3>
<div class="callout-content">
<p>Using the filesystem diagram below, if <code>pwd</code> displays
<code>/Users/thing</code>, what will <code>ls -F ../backup</code>
display?</p>
<ol style="list-style-type: decimal">
<li><code>../backup: No such file or directory</code></li>
<li><code>2012-12-01 2013-01-08 2013-01-27</code></li>
<li><code>2012-12-01/ 2013-01-08/ 2013-01-27/</code></li>
<li><code>original/ pnas_final/ pnas_sub/</code></li>
</ol>
<figure><img src="../fig/filesystem-challenge.svg" alt="File System for Challenge Questions" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>No: there <em>is</em> a directory <code>backup</code> in
<code>/Users</code>.</li>
<li>No: this is the content of <code>Users/thing/backup</code>, but with
<code>..</code> we asked for one level further up.</li>
<li>No: see previous explanation.</li>
<li>Yes: <code>../backup/</code> refers to
<code>/Users/backup/</code>.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="ls-reading-comprehension" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="ls-reading-comprehension" class="callout-inner">
<h3 class="callout-title">
<code>ls</code> Reading Comprehension<a class="anchor" aria-label="anchor" href="#ls-reading-comprehension"></a>
</h3>
<div class="callout-content">
<p>Using the filesystem diagram below, if <code>pwd</code> displays
<code>/Users/backup</code>, and <code>-r</code> tells <code>ls</code> to
display things in reverse order, what command(s) will result in the
following output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>pnas_sub/ pnas_final/ original/</code></pre>
</div>
<figure><img src="../fig/filesystem-challenge.svg" alt="File System for Challenge Questions" class="figure mx-auto d-block"></figure><ol style="list-style-type: decimal">
<li><code>ls pwd</code></li>
<li><code>ls -r -F</code></li>
<li><code>ls -r -F /Users/backup</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>No: <code>pwd</code> is not the name of a directory.</li>
<li>Yes: <code>ls</code> without directory argument lists files and
directories in the current directory.</li>
<li>Yes: uses the absolute path explicitly.</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="nelles-pipeline-organizing-files">Nelle’s Pipeline: Organizing Files<a class="anchor" aria-label="anchor" href="#nelles-pipeline-organizing-files"></a>
</h3>
<p>Knowing this much about files and directories, Nelle is ready to
organize the files that the protein assay machine will create. First,
she creates a directory called <code>north-pacific-gyre</code> (to
remind herself where the data came from). Inside that, she creates a
directory called <code>2012-07-03</code>, which is the date she started
processing the samples. She used to use names like
<code>conference-paper</code> and <code>revised-results</code>, but she
found them hard to understand after a couple of years. (The final straw
was when she found herself creating a directory called
<code>revised-revised-results-3</code>.)</p>
<div id="sorting-output" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="sorting-output" class="callout-inner">
<h3 class="callout-title">Sorting Output<a class="anchor" aria-label="anchor" href="#sorting-output"></a>
</h3>
<div class="callout-content">
<p>Nelle names her directories ‘year-month-day’, with leading zeroes for
months and days, because the shell displays file and directory names in
alphabetical order. If she used month names, December would come before
July; if she didn’t use leading zeroes, November (‘11’) would come
before July (‘7’). Similarly, putting the year first means that June
2012 will come before June 2013.</p>
</div>
</div>
</div>
<p>Each of her physical samples is labelled according to her lab’s
convention with a unique ten-character ID, such as ‘NENE01729A’. This is
what she used in her collection log to record the location, time, depth,
and other characteristics of the sample, so she decides to use it as
part of each data file’s name. Since the assay machine’s output is plain
text, she will call her files <code>NENE01729A.txt</code>,
<code>NENE01812A.txt</code>, and so on. All 1520 files will go into the
same directory.</p>
<p>Now in her current directory <code>data-shell</code>, Nelle can see
what files she has using the command:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls north-pacific-gyre/2012-07-03/</span></code></pre>
</div>
<p>This is a lot to type, but she can let the shell do most of the work
through what is called <strong>tab completion</strong>. If she
types:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls nor</span></code></pre>
</div>
<p>and then presses <kbd>Tab</kbd> (the tab key on her keyboard), the
shell automatically completes the directory name for her:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls north-pacific-gyre/</span></code></pre>
</div>
<p>If she presses <kbd>Tab</kbd> again, Bash will add
<code>2012-07-03/</code> to the command, since it’s the only possible
completion. Pressing <kbd>Tab</kbd> again does nothing, since there are
19 possibilities; pressing <kbd>Tab</kbd> twice brings up a list of all
the files, and so on. This is called <strong>tab completion</strong>,
and we will see it in many other tools as we go on.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>The file system is responsible for managing information on the
disk.</li>
<li>Information is stored in files, which are stored in directories
(folders).</li>
<li>Directories can also store other directories, which forms a
directory tree.</li>
<li>
<code>cd path</code> changes the current working directory.</li>
<li>
<code>ls path</code> prints a listing of a specific file or
directory; <code>ls</code> on its own lists the current working
directory.</li>
<li>
<code>pwd</code> prints the user’s current working directory.</li>
<li>
<code>/</code> on its own is the root directory of the whole file
system.</li>
<li>A relative path specifies a location starting from the current
location.</li>
<li>An absolute path specifies a location from the root of the file
system.</li>
<li>Directory names in a path are separated with <code>/</code> on Unix,
but <code>\</code> on Windows.</li>
<li>
<code>..</code> means ‘the directory above the current one’;
<code>.</code> on its own means ‘the current directory’.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-03-create"><p>Content from <a href="03-create.html">Working With Files and Directories</a></p>
<hr>
<p> Last updated on 2023-11-21 | 
        
        <a href="https://github.com/zkamvar/mdf-shell-novice/edit/main/episodes/03-create.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 50 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I create, copy, and delete files and directories?</li>
<li>How can I edit files?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Create a directory hierarchy that matches a given diagram.</li>
<li>Create files in that hierarchy using an editor or by copying and
renaming existing files.</li>
<li>Delete, copy and move specified files and/or directories.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section id="creating-directories"><h2 class="section-heading">Creating directories<a class="anchor" aria-label="anchor" href="#creating-directories"></a>
</h2>
<hr class="half-width">
<p>We now know how to explore files and directories, but how do we
create them in the first place?</p>
<div class="section level3">
<h3 id="step-one-see-where-we-are-and-what-we-already-have">Step one: see where we are and what we already have<a class="anchor" aria-label="anchor" href="#step-one-see-where-we-are-and-what-we-already-have"></a>
</h3>
<p>Let’s go back to our <code>data-shell</code> directory on the Home
directory and use <code>ls -F</code> to see what it contains:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/YourUserName/data-shell</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>creatures  data  molecules  north-pacific-gyre  notes.txt  pizza.cfg  solar.pdf  writing</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="create-a-directory">Create a directory<a class="anchor" aria-label="anchor" href="#create-a-directory"></a>
</h3>
<p>Let’s create a new directory called <code>thesis</code> using the
command <code>mkdir thesis</code> (which has no output):</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir thesis</span></code></pre>
</div>
<p>As you might guess from its name, <code>mkdir</code> means ‘make
directory’. Since <code>thesis</code> is a relative path (i.e., does not
have a leading slash, like <code>/what/ever/thesis</code>), the new
directory is created in the current working directory:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>creatures  data  molecules  north-pacific-gyre  notes.txt  pizza.cfg  solar.pdf  thesis  writing</code></pre>
</div>
<div id="two-ways-of-doing-the-same-thing" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="two-ways-of-doing-the-same-thing" class="callout-inner">
<h3 class="callout-title">Two ways of doing the same thing<a class="anchor" aria-label="anchor" href="#two-ways-of-doing-the-same-thing"></a>
</h3>
<div class="callout-content">
<p>Using the shell to create a directory is no different than using a
file explorer. If you open the current directory using your operating
system’s graphical file explorer, the <code>thesis</code> directory will
appear there too. While the shell and the file explorer are two
different ways of interacting with the files, the files and directories
themselves are the same.</p>
</div>
</div>
</div>
<div id="good-names-for-files-and-directories" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="good-names-for-files-and-directories" class="callout-inner">
<h3 class="callout-title">Good names for files and directories<a class="anchor" aria-label="anchor" href="#good-names-for-files-and-directories"></a>
</h3>
<div class="callout-content">
<p>Complicated names of files and directories can make your life painful
when working on the command line. Here we provide a few useful tips for
the names of your files.</p>
<ol style="list-style-type: decimal">
<li>Don’t use spaces.</li>
</ol>
<p>Spaces can make a name more meaningful, but since spaces are used to
separate arguments on the command line it is better to avoid them in
names of files and directories. You can use <code>-</code> or
<code>_</code> instead (e.g. <code>north-pacific-gyre/</code> rather
than <code>north pacific gyre/</code>).</p>
<ol start="2" style="list-style-type: decimal">
<li>Don’t begin the name with <code>-</code> (dash).</li>
</ol>
<p>Commands treat names starting with <code>-</code> as options.</p>
<ol start="3" style="list-style-type: decimal">
<li>Stick with letters, numbers, <code>.</code> (period or ‘full stop’),
<code>-</code> (dash) and <code>_</code> (underscore).</li>
</ol>
<p>Many other characters have special meanings on the command line. We
will learn about some of these during this lesson. There are special
characters that can cause your command to not work as expected and can
even result in data loss.</p>
<p>If you need to refer to names of files or directories that have
spaces or other special characters, you should surround the name in
quotes (<code>""</code>).</p>
</div>
</div>
</div>
<p>Since we’ve just created the <code>thesis</code> directory, there’s
nothing in it yet:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls thesis</span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="create-a-text-file">Create a text file<a class="anchor" aria-label="anchor" href="#create-a-text-file"></a>
</h3>
<p>Let’s change our working directory to <code>thesis</code> using
<code>cd</code>, then run a text editor called Nano to create a file
called <code>draft.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd thesis</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nano draft.txt</span></code></pre>
</div>
<div id="which-editor" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="which-editor" class="callout-inner">
<h3 class="callout-title">Which Editor?<a class="anchor" aria-label="anchor" href="#which-editor"></a>
</h3>
<div class="callout-content">
<p>When we say, ‘<code>nano</code> is a text editor’” we really do mean
‘text’: it can only work with plain character data, not tables, images,
or any other human-friendly media. We use it in examples because it is
one of the least complex text editors. However, because of this trait,
it may not be powerful enough or flexible enough for the work you need
to do after this workshop. On Unix systems (such as Linux and Mac OS X),
many programmers use <a href="https://www.gnu.org/software/emacs/" class="external-link">Emacs</a> or <a href="https://www.vim.org/" class="external-link">Vim</a> (both of which require more time to
learn), or a graphical editor such as <a href="https://projects.gnome.org/gedit/" class="external-link">Gedit</a>. On Windows, you may
wish to use <a href="https://notepad-plus-plus.org/" class="external-link">Notepad++</a>.
Windows also has a built-in editor called <code>notepad</code> that can
be run from the command line in the same way as <code>nano</code> for
the purposes of this lesson.</p>
<p>No matter what editor you use, you will need to know where it
searches for and saves files. If you start it from the shell, it will
(probably) use your current working directory as its default location.
If you use your computer’s start menu, it may want to save files in your
desktop or documents directory instead. You can change this by
navigating to another directory the first time you ‘Save As…’</p>
</div>
</div>
</div>
<p>Let’s type in a few lines of text. Once we’re happy with our text, we
can press <kbd>Ctrl</kbd>+<kbd>O</kbd> (press the Ctrl or Control key
and, while holding it down, press the O key) to write our data to disk
(we’ll be asked what file we want to save this to: press
<kbd>Return</kbd> to accept the suggested default of
<code>draft.txt</code>).</p>
<figure><img src="../fig/nano-screenshot.png" alt="Nano in Action" class="figure mx-auto d-block"></figure><p>Once our file is saved, we can use <code>Ctrl-X</code> to quit the
editor and return to the shell.</p>
<div id="control-ctrl-or-key" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="control-ctrl-or-key" class="callout-inner">
<h3 class="callout-title">Control, Ctrl, or ^ Key<a class="anchor" aria-label="anchor" href="#control-ctrl-or-key"></a>
</h3>
<div class="callout-content">
<p>The Control key is also called the ‘Ctrl’ key. There are various ways
in which using the Control key may be described. For example, you may
see an instruction to press the Control key and, while holding it down,
press the X key, described as any of:</p>
<ul>
<li><code>Control-X</code></li>
<li><code>Control+X</code></li>
<li><code>Ctrl-X</code></li>
<li><code>Ctrl+X</code></li>
<li><code>^X</code></li>
<li><code>C-x</code></li>
</ul>
<p>In nano, along the bottom of the screen you’ll see
<code>^G Get Help ^O WriteOut</code>. This means that you can use
<code>Control-G</code> to get help and <code>Control-O</code> to save
your file.</p>
</div>
</div>
</div>
<p><code>nano</code> doesn’t leave any output on the screen after it
exits, but <code>ls</code> now shows that we have created a file called
<code>draft.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">draft.txt</span></span></code></pre>
</div>
<div id="creating-files-a-different-way" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="creating-files-a-different-way" class="callout-inner">
<h3 class="callout-title">Creating Files a Different Way<a class="anchor" aria-label="anchor" href="#creating-files-a-different-way"></a>
</h3>
<div class="callout-content">
<p>We have seen how to create text files using the <code>nano</code>
editor. Now, try the following command:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> touch my_file.txt</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li><p>What did the <code>touch</code> command do? When you look at your
current directory using the GUI file explorer, does the file show
up?</p></li>
<li><p>Use <code>ls -l</code> to inspect the files. How large is
<code>my_file.txt</code>?</p></li>
<li><p>When might you want to create a file this way?</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li><p>The <code>touch</code> command generates a new file called
<code>my_file.txt</code> in your current directory. You can observe this
newly generated file by typing <code>ls</code> at the command line
prompt. <code>my_file.txt</code> can also be viewed in your GUI file
explorer.</p></li>
<li><p>When you inspect the file with <code>ls -l</code>, note that the
size of <code>my_file.txt</code> is 0 bytes. In other words, it contains
no data. If you open <code>my_file.txt</code> using your text editor it
is blank.</p></li>
<li><p>Some programs do not generate output files themselves, but
instead require that empty files have already been generated. When the
program is run, it searches for an existing file to populate with its
output. The touch command allows you to efficiently generate a blank
text file to be used by such programs.</p></li>
</ol>
</div>
</div>
</div>
</div>
<div id="whats-in-a-name" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="whats-in-a-name" class="callout-inner">
<h3 class="callout-title">What’s In A Name?<a class="anchor" aria-label="anchor" href="#whats-in-a-name"></a>
</h3>
<div class="callout-content">
<p>You may have noticed that all of Nelle’s files are named ‘something
dot something’, and in this part of the lesson, we always used the
extension <code>.txt</code>. This is just a convention: we can call a
file <code>mythesis</code> or almost anything else we want. However,
most people use two-part names most of the time to help them (and their
programs) tell different kinds of files apart. The second part of such a
name is called the <strong>filename extension</strong>, and indicates
what type of data the file holds: <code>.txt</code> signals a plain text
file, <code>.pdf</code> indicates a PDF document, <code>.cfg</code> is a
configuration file full of parameters for some program or other,
<code>.png</code> is a PNG image, and so on.</p>
<p>This is just a convention, albeit an important one. Files contain
bytes: it’s up to us and our programs to interpret those bytes according
to the rules for plain text files, PDF documents, configuration files,
images, and so on.</p>
<p>Naming a PNG image of a whale as <code>whale.mp3</code> doesn’t
somehow magically turn it into a recording of whalesong, though it
<em>might</em> cause the operating system to try to open it with a music
player when someone double-clicks it.</p>
</div>
</div>
</div>
</div>
</section><section id="moving-files-and-directories"><h2 class="section-heading">Moving files and directories<a class="anchor" aria-label="anchor" href="#moving-files-and-directories"></a>
</h2>
<hr class="half-width">
<p>Returning to the <code>data-shell</code> directory,</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> data-shell</span></code></pre>
</div>
<p>In our <code>thesis</code> directory we have a file
<code>draft.txt</code> which isn’t a particularly informative name, so
let’s change the file’s name using <code>mv</code>, which is short for
‘move’:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mv thesis/draft.txt thesis/quotes.txt</span></code></pre>
</div>
<p>The first argument tells <code>mv</code> what we’re ‘moving’, while
the second is where it’s to go. In this case, we’re moving
<code>thesis/draft.txt</code> to <code>thesis/quotes.txt</code>, which
has the same effect as renaming the file. Sure enough, <code>ls</code>
shows us that <code>thesis</code> now contains one file called
<code>quotes.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls thesis</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">quotes.txt</span></span></code></pre>
</div>
<p>One has to be careful when specifying the target file name, since
<code>mv</code> will silently overwrite any existing file with the same
name, which could lead to data loss. An additional option,
<code>mv -i</code> (or <code>mv --interactive</code>), can be used to
make <code>mv</code> ask you for confirmation before overwriting.</p>
<p>Note that <code>mv</code> also works on directories.</p>
<p>Let’s move <code>quotes.txt</code> into the current working
directory. We use <code>mv</code> once again, but this time we’ll use
just the name of a directory as the second argument to tell
<code>mv</code> that we want to keep the filename, but put the file
somewhere new. (This is why the command is called ‘move’.) In this case,
the directory name we use is the special directory name <code>.</code>
that we mentioned earlier.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mv thesis/quotes.txt .</span></code></pre>
</div>
<p>The effect is to move the file from the directory it was in to the
current working directory. <code>ls</code> now shows us that
<code>thesis</code> is empty:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls thesis</span></code></pre>
</div>
<p>Further, <code>ls</code> with a filename or directory name as an
argument only lists that file or directory. We can use this to see that
<code>quotes.txt</code> is still in our current directory:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls quotes.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">quotes.txt</span></span></code></pre>
</div>
<div id="moving-to-the-current-folder" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="moving-to-the-current-folder" class="callout-inner">
<h3 class="callout-title">Moving to the Current Folder<a class="anchor" aria-label="anchor" href="#moving-to-the-current-folder"></a>
</h3>
<div class="callout-content">
<p>After running the following commands, Jamie realizes that she put the
files <code>sucrose.dat</code> and <code>maltose.dat</code> into the
wrong folder:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a> <span class="ex">analyzed</span> raw</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls analyzed</span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="ex">fructose.dat</span> glucose.dat maltose.dat sucrose.dat</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd raw</span></code></pre>
</div>
<p>Fill in the blanks to move these files to the current folder (i.e.,
the one she is currently in):</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mv ___/sucrose.dat  ___/maltose.dat ___</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mv ../analyzed/sucrose.dat ../analyzed/maltose.dat .</span></code></pre>
</div>
<p>Recall that <code>..</code> refers to the parent directory (i.e. one
above the current directory) and that <code>.</code> refers to the
current directory.</p>
</div>
</div>
</div>
</div>
</section><section id="copying-files-and-directories"><h2 class="section-heading">Copying files and directories<a class="anchor" aria-label="anchor" href="#copying-files-and-directories"></a>
</h2>
<hr class="half-width">
<p>The <code>cp</code> command works very much like <code>mv</code>,
except it copies a file instead of moving it. We can check that it did
the right thing using <code>ls</code> with two paths as arguments — like
most Unix commands, <code>ls</code> can be given multiple paths at
once:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp quotes.txt thesis/quotations.txt</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls quotes.txt thesis/quotations.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>quotes.txt   thesis/quotations.txt</code></pre>
</div>
<p>We can also copy a directory and all its contents by using the <a href="https://en.wikipedia.org/wiki/Recursion" class="external-link">recursive</a> option
<code>-r</code>, e.g. to back up a directory:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp <span class="at">-r</span> thesis thesis_backup</span></code></pre>
</div>
<p>We can check the result by listing the contents of both the
<code>thesis</code> and <code>thesis_backup</code> directory:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls thesis thesis_backup</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">thesis</span><span class="op">:</span></span>
<span><span class="va">quotations.txt</span></span>
<span></span>
<span><span class="va">thesis_backup</span><span class="op">:</span></span>
<span><span class="va">quotations.txt</span></span></code></pre>
</div>
<div id="renaming-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="renaming-files" class="callout-inner">
<h3 class="callout-title">Renaming Files<a class="anchor" aria-label="anchor" href="#renaming-files"></a>
</h3>
<div class="callout-content">
<p>Suppose that you created a plain-text file in your current directory
to contain a list of the statistical tests you will need to do to
analyze your data, and named it: <code>statstics.txt</code></p>
<p>After creating and saving this file you realize you misspelled the
filename! You want to correct the mistake, which of the following
commands could you use to do so?</p>
<ol style="list-style-type: decimal">
<li><code>cp statstics.txt statistics.txt</code></li>
<li><code>mv statstics.txt statistics.txt</code></li>
<li><code>mv statstics.txt .</code></li>
<li><code>cp statstics.txt .</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>No. While this would create a file with the correct name, the
incorrectly named file still exists in the directory and would need to
be deleted.</li>
<li>Yes, this would work to rename the file.</li>
<li>No, the period(.) indicates where to move the file, but does not
provide a new file name; identical file names cannot be created.</li>
<li>No, the period(.) indicates where to copy the file, but does not
provide a new file name; identical file names cannot be created.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="moving-and-copying" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="moving-and-copying" class="callout-inner">
<h3 class="callout-title">Moving and Copying<a class="anchor" aria-label="anchor" href="#moving-and-copying"></a>
</h3>
<div class="callout-content">
<p>What is the output of the closing <code>ls</code> command in the
sequence shown below?</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> pwd</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>/Users/jamie/data</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">proteins.dat</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir recombine</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mv proteins.dat recombine/</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp recombine/proteins.dat ../proteins-saved.dat</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li><code>proteins-saved.dat recombine</code></li>
<li><code>recombine</code></li>
<li><code>proteins.dat recombine</code></li>
<li><code>proteins-saved.dat</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<p>We start in the <code>/Users/jamie/data</code> directory, and create
a new folder called <code>recombine</code>. The second line moves
(<code>mv</code>) the file <code>proteins.dat</code> to the new folder
(<code>recombine</code>). The third line makes a copy of the file we
just moved. The tricky part here is where the file was copied to. Recall
that <code>..</code> means ‘go up a level’, so the copied file is now in
<code>/Users/jamie</code>. Notice that <code>..</code> is interpreted
with respect to the current working directory, <strong>not</strong> with
respect to the location of the file being copied. So, the only thing
that will show using ls (in <code>/Users/jamie/data</code>) is the
recombine folder.</p>
<ol style="list-style-type: decimal">
<li>No, see explanation above. <code>proteins-saved.dat</code> is
located at <code>/Users/jamie</code>
</li>
<li>Yes</li>
<li>No, see explanation above. <code>proteins.dat</code> is located at
<code>/Users/jamie/data/recombine</code>
</li>
<li>No, see explanation above. <code>proteins-saved.dat</code> is
located at <code>/Users/jamie</code>
</li>
</ol>
</div>
</div>
</div>
</div>
</section><section id="removing-files-and-directories"><h2 class="section-heading">Removing files and directories<a class="anchor" aria-label="anchor" href="#removing-files-and-directories"></a>
</h2>
<hr class="half-width">
<p>Returning to the <code>data-shell</code> directory, let’s tidy up
this directory by removing the <code>quotes.txt</code> file we created.
The Unix command we’ll use for this is <code>rm</code> (short for
‘remove’):</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rm quotes.txt</span></code></pre>
</div>
<p>We can confirm the file has gone using <code>ls</code>:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls quotes.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ls: cannot access 'quotes.txt': No such file or directory</code></pre>
</div>
<div id="deleting-is-forever" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="deleting-is-forever" class="callout-inner">
<h3 class="callout-title">Deleting Is Forever<a class="anchor" aria-label="anchor" href="#deleting-is-forever"></a>
</h3>
<div class="callout-content">
<p>The Unix shell doesn’t have a trash bin that we can recover deleted
files from (though most graphical interfaces to Unix do). Instead, when
we delete files, they are unlinked from the file system so that their
storage space on disk can be recycled. Tools for finding and recovering
deleted files do exist, but there’s no guarantee they’ll work in any
particular situation, since the computer may recycle the file’s disk
space right away.</p>
</div>
</div>
</div>
<div id="using-rm-safely" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="using-rm-safely" class="callout-inner">
<h3 class="callout-title">Using <code>rm</code> Safely<a class="anchor" aria-label="anchor" href="#using-rm-safely"></a>
</h3>
<div class="callout-content">
<p>What happens when we execute
<code>rm -i thesis_backup/quotations.txt</code>? Why would we want this
protection when using <code>rm</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rm: remove regular file <span class="st">'thesis_backup/quotations.txt'</span><span class="pp">?</span> y</span></code></pre>
</div>
<p>The <code>-i</code> option will prompt before (every) removal (use
<kbd>Y</kbd> to confirm deletion or <kbd>N</kbd> to keep the file). The
Unix shell doesn’t have a trash bin, so all the files removed will
disappear forever. By using the <code>-i</code> option, we have the
chance to check that we are deleting only the files that we want to
remove.</p>
</div>
</div>
</div>
</div>
<p>If we try to remove the <code>thesis</code> directory using
<code>rm thesis</code>, we get an error message:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rm thesis</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>rm: cannot remove `thesis': Is a directory</code></pre>
</div>
<p>This happens because <code>rm</code> by default only works on files,
not directories.</p>
<p><code>rm</code> can remove a directory <em>and all its contents</em>
if we use the recursive option <code>-r</code>, and it will do so
<em>without any confirmation prompts</em>:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> rm <span class="at">-r</span> thesis</span></code></pre>
</div>
<p>Given that there is no way to retrieve files deleted using the shell,
<code>rm -r</code> <em>should be used with great caution</em> (you might
consider adding the interactive option <code>rm -r -i</code>).</p>
</section><section id="operations-with-multiple-files-and-directories"><h2 class="section-heading">Operations with multiple files and directories<a class="anchor" aria-label="anchor" href="#operations-with-multiple-files-and-directories"></a>
</h2>
<hr class="half-width">
<p>Oftentimes one needs to copy or move several files at once. This can
be done by providing a list of individual filenames, or specifying a
naming pattern using wildcards.</p>
<div id="copy-with-multiple-filenames" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="copy-with-multiple-filenames" class="callout-inner">
<h3 class="callout-title">Copy with Multiple Filenames<a class="anchor" aria-label="anchor" href="#copy-with-multiple-filenames"></a>
</h3>
<div class="callout-content">
<p>For this exercise, you can test the commands in the
<code>data-shell/data</code> directory.</p>
<p>In the example below, what does <code>cp</code> do when given several
filenames and a directory name?</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir backup</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp amino-acids.txt animals.txt backup/</span></code></pre>
</div>
<p>In the example below, what does <code>cp</code> do when given three
or more file names?</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>amino-acids.txt  animals.txt  backup  elements  morse.txt  pdb  planets.txt  salmon.txt  sunspot.txt</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp amino-acids.txt animals.txt morse.txt</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<p>If given more than one file name followed by a directory name
(i.e. the destination directory must be the last argument),
<code>cp</code> copies the files to the named directory.</p>
<p>If given three file names, <code>cp</code> throws an error such as
the one below, because it is expecting a directory name as the last
argument.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cp: target ‘morse.txt' is not a directory</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="using-wildcards-for-accessing-multiple-files-at-once">Using wildcards for accessing multiple files at once<a class="anchor" aria-label="anchor" href="#using-wildcards-for-accessing-multiple-files-at-once"></a>
</h3>
<div id="wildcards" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="wildcards" class="callout-inner">
<h3 class="callout-title">Wildcards<a class="anchor" aria-label="anchor" href="#wildcards"></a>
</h3>
<div class="callout-content">
<p><code>*</code> is a <strong>wildcard</strong>, which matches zero or
more characters. Let’s consider the <code>data-shell/molecules</code>
directory: <code>*.pdb</code> matches <code>ethane.pdb</code>,
<code>propane.pdb</code>, and every file that ends with ‘.pdb’. On the
other hand, <code>p*.pdb</code> only matches <code>pentane.pdb</code>
and <code>propane.pdb</code>, because the ‘p’ at the front only matches
filenames that begin with the letter ‘p’.</p>
<p><code>?</code> is also a wildcard, but it matches exactly one
character. So <code>?ethane.pdb</code> would match
<code>methane.pdb</code> whereas <code>*ethane.pdb</code> matches both
<code>ethane.pdb</code>, and <code>methane.pdb</code>.</p>
<p>Wildcards can be used in combination with each other
e.g. <code>???ane.pdb</code> matches three characters followed by
<code>ane.pdb</code>, giving
<code>cubane.pdb  ethane.pdb  octane.pdb</code>.</p>
<p>When the shell sees a wildcard, it expands the wildcard to create a
list of matching filenames <em>before</em> running the command that was
asked for. As an exception, if a wildcard expression does not match any
file, Bash will pass the expression as an argument to the command as it
is. For example typing <code>ls *.pdf</code> in the
<code>molecules</code> directory (which contains only files with names
ending with <code>.pdb</code>) results in an error message that there is
no file called <code>*.pdf</code>. However, generally commands like
<code>wc</code> and <code>ls</code> see the lists of file names matching
these expressions, but not the wildcards themselves. It is the shell,
not the other programs, that deals with expanding wildcards, and this is
another example of orthogonal design.</p>
</div>
</div>
</div>
<div id="list-filenames-matching-a-pattern" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="list-filenames-matching-a-pattern" class="callout-inner">
<h3 class="callout-title">List filenames matching a pattern<a class="anchor" aria-label="anchor" href="#list-filenames-matching-a-pattern"></a>
</h3>
<div class="callout-content">
<p>When run in the <code>molecules</code> directory, which
<code>ls</code> command(s) will produce this output?</p>
<p><code>ethane.pdb   methane.pdb</code></p>
<ol style="list-style-type: decimal">
<li><code>ls *t*ane.pdb</code></li>
<li><code>ls *t?ne.*</code></li>
<li><code>ls *t??ne.pdb</code></li>
<li><code>ls ethane.*</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<p>The solution is <code>3.</code></p>
<p><code>1.</code> shows all files whose names contain zero or more
characters (<code>*</code>) followed by the letter <code>t</code>, then
zero or more characters (<code>*</code>) followed by
<code>ane.pdb</code>. This gives
<code>ethane.pdb  methane.pdb  octane.pdb  pentane.pdb</code>.</p>
<p><code>2.</code> shows all files whose names start with zero or more
characters (<code>*</code>) followed by the letter <code>t</code>, then
a single character (<code>?</code>), then <code>ne.</code> followed by
zero or more characters (<code>*</code>). This will give us
<code>octane.pdb</code> and <code>pentane.pdb</code> but doesn’t match
anything which ends in <code>thane.pdb</code>.</p>
<p><code>3.</code> fixes the problems of option 2 by matching two
characters (<code>??</code>) between <code>t</code> and <code>ne</code>.
This is the solution.</p>
<p><code>4.</code> only shows files starting with
<code>ethane.</code>.</p>
</div>
</div>
</div>
</div>
<div id="more-on-wildcards" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="more-on-wildcards" class="callout-inner">
<h3 class="callout-title">More on Wildcards<a class="anchor" aria-label="anchor" href="#more-on-wildcards"></a>
</h3>
<div class="callout-content">
<p>Sam has a directory containing calibration data, datasets, and
descriptions of the datasets:</p>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="bu">.</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-calibration.txt</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset1.txt</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset2.txt</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset_overview.txt</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-calibration.txt</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset1.txt</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset2.txt</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset_overview.txt</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-calibration.txt</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset1.txt</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset2.txt</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset_overview.txt</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> backup</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> ├── calibration</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> └── datasets</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a><span class="ex">└──</span> send_to_bob</span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>    <span class="ex">├──</span> all_datasets_created_on_a_23rd</span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>    <span class="ex">└──</span> all_november_files</span></code></pre>
</div>
<p>Before heading off to another field trip, she wants to back up her
data and send some datasets to her colleague Bob. Sam uses the following
commands to get the job done:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>dataset<span class="pp">*</span> backup/datasets</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp ____calibration____ backup/calibration</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp 2015-____-____ send_to_bob/all_november_files/</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp ____ send_to_bob/all_datasets_created_on_a_23rd/</span></code></pre>
</div>
<p>Help Sam by filling in the blanks.</p>
<p>The resulting directory structure should look like this</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="bu">.</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-calibration.txt</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset1.txt</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset2.txt</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-23-dataset_overview.txt</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-calibration.txt</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset1.txt</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset2.txt</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-10-26-dataset_overview.txt</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-calibration.txt</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset1.txt</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset2.txt</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> 2015-11-23-dataset_overview.txt</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> backup</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> ├── calibration</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> │   ├── 2015-10-23-calibration.txt</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> │   ├── 2015-10-26-calibration.txt</span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> │   └── 2015-11-23-calibration.txt</span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span> └── datasets</span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-23-dataset1.txt</span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-23-dataset2.txt</span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-23-dataset_overview.txt</span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-26-dataset1.txt</span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-26-dataset2.txt</span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-10-26-dataset_overview.txt</span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-11-23-dataset1.txt</span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span>     ├── 2015-11-23-dataset2.txt</span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a><span class="ex">│  </span>     └── 2015-11-23-dataset_overview.txt</span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a><span class="ex">└──</span> send_to_bob</span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a>    <span class="ex">├──</span> all_datasets_created_on_a_23rd</span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a>    <span class="ex">│  </span> ├── 2015-10-23-dataset1.txt</span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a>    <span class="ex">│  </span> ├── 2015-10-23-dataset2.txt</span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a>    <span class="ex">│  </span> ├── 2015-10-23-dataset_overview.txt</span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a>    <span class="ex">│  </span> ├── 2015-11-23-dataset1.txt</span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a>    <span class="ex">│  </span> ├── 2015-11-23-dataset2.txt</span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a>    <span class="ex">│  </span> └── 2015-11-23-dataset_overview.txt</span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a>    <span class="ex">└──</span> all_november_files</span>
<span id="cb48-38"><a href="#cb48-38" aria-hidden="true" tabindex="-1"></a>        <span class="ex">├──</span> 2015-11-23-calibration.txt</span>
<span id="cb48-39"><a href="#cb48-39" aria-hidden="true" tabindex="-1"></a>        <span class="ex">├──</span> 2015-11-23-dataset1.txt</span>
<span id="cb48-40"><a href="#cb48-40" aria-hidden="true" tabindex="-1"></a>        <span class="ex">├──</span> 2015-11-23-dataset2.txt</span>
<span id="cb48-41"><a href="#cb48-41" aria-hidden="true" tabindex="-1"></a>        <span class="ex">└──</span> 2015-11-23-dataset_overview.txt</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" data-bs-parent="#accordionSolution8" aria-labelledby="headingSolution8">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>calibration.txt backup/calibration</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp 2015-11-<span class="pp">*</span> send_to_bob/all_november_files/</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>-23-dataset<span class="pp">*</span> send_to_bob/all_datasets_created_on_a_23rd/</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="organizing-directories-and-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="organizing-directories-and-files" class="callout-inner">
<h3 class="callout-title">Organizing Directories and Files<a class="anchor" aria-label="anchor" href="#organizing-directories-and-files"></a>
</h3>
<div class="callout-content">
<p>Jamie is working on a project and she sees that her files aren’t very
well organized:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>analyzed  fructose.dat    raw   sucrose.dat</code></pre>
</div>
<p>The <code>fructose.dat</code> and <code>sucrose.dat</code> files
contain output from her data analysis. What command(s) covered in this
lesson does she need to run so that the commands below will produce the
output shown?</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>analyzed/   raw/</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb54">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls analyzed</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>fructose.dat    sucrose.dat</code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution9" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution9" aria-expanded="false" aria-controls="collapseSolution9">
  <h4 class="accordion-header" id="headingSolution9">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution9" class="accordion-collapse collapse" data-bs-parent="#accordionSolution9" aria-labelledby="headingSolution9">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb56">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> <span class="pp">*</span>.dat analyzed</span></code></pre>
</div>
<p>Jamie needs to move her files <code>fructose.dat</code> and
<code>sucrose.dat</code> to the <code>analyzed</code> directory. The
shell will expand *.dat to match all .dat files in the current
directory. The <code>mv</code> command then moves the list of .dat files
to the ‘analyzed’ directory.</p>
</div>
</div>
</div>
</div>
<div id="reproduce-a-folder-structure" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="reproduce-a-folder-structure" class="callout-inner">
<h3 class="callout-title">Reproduce a folder structure<a class="anchor" aria-label="anchor" href="#reproduce-a-folder-structure"></a>
</h3>
<div class="callout-content">
<p>You’re starting a new experiment, and would like to duplicate the
directory structure from your previous experiment so you can add new
data.</p>
<p>Assume that the previous experiment is in a folder called
‘2016-05-18’, which contains a <code>data</code> folder that in turn
contains folders named <code>raw</code> and <code>processed</code> that
contain data files. The goal is to copy the folder structure of the
<code>2016-05-18-data</code> folder into a folder called
<code>2016-05-20</code> so that your final directory structure looks
like this:</p>
<p>2016-05-20/ └── data ├── processed └── raw</p>
<p>Which of the following set of commands would achieve this objective?
What would the other commands do?</p>
<div class="codewrapper sourceCode" id="cb57">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/processed</span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/raw</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb58">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd 2016-05-20</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir data</span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd data</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir raw processed</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb59">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/raw</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20/data/processed</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb60">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir 2016-05-20</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd 2016-05-20</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir data</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> mkdir raw processed</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution10" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution10" aria-expanded="false" aria-controls="collapseSolution10">
  <h4 class="accordion-header" id="headingSolution10">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution10" class="accordion-collapse collapse" data-bs-parent="#accordionSolution10" aria-labelledby="headingSolution10">
<div class="accordion-body">
<p>The first two sets of commands achieve this objective. The first set
uses relative paths to create the top level directory before the
subdirectories.</p>
<p>The third set of commands will give an error because
<code>mkdir</code> won’t create a subdirectory of a non-existant
directory: the intermediate level folders must be created first.</p>
<p>The final set of commands generates the ‘raw’ and ‘processed’
directories at the same level as the ‘data’ directory.</p>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>
<code>cp old new</code> copies a file.</li>
<li>
<code>mkdir path</code> creates a new directory.</li>
<li>
<code>mv old new</code> moves (renames) a file or directory.</li>
<li>
<code>rm path</code> removes (deletes) a file.</li>
<li>
<code>*</code> matches zero or more characters in a filename, so
<code>*.txt</code> matches all files ending in <code>.txt</code>.</li>
<li>
<code>?</code> matches any single character in a filename, so
<code>?.txt</code> matches <code>a.txt</code> but not
<code>any.txt</code>.</li>
<li>Use of the Control key may be described in many ways, including
<code>Ctrl-X</code>, <code>Control-X</code>, and <code>^X</code>.</li>
<li>The shell does not have a trash bin: once something is deleted, it’s
really gone.</li>
<li>Most files’ names are <code>something.extension</code>. The
extension isn’t required, and doesn’t guarantee anything, but is
normally used to indicate the type of data in the file.</li>
<li>Depending on the type of work you do, you may need a more powerful
text editor than Nano.</li>
</ul>
</div>
</div>
</div>
</div>
</section></section><section id="aio-04-pipefilter"><p>Content from <a href="04-pipefilter.html">Pipes and Filters</a></p>
<hr>
<p> Last updated on 2023-11-21 | 
        
        <a href="https://github.com/zkamvar/mdf-shell-novice/edit/main/episodes/04-pipefilter.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 35 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I combine existing commands to do new things?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Redirect a command’s output to a file.</li>
<li>Process a file instead of keyboard input using redirection.</li>
<li>Construct command pipelines with two or more stages.</li>
<li>Explain what usually happens if a program or pipeline isn’t given
any input to process.</li>
<li>Explain Unix’s ‘small pieces, loosely joined’ philosophy.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Now that we know a few basic commands, we can finally look at the
shell’s most powerful feature: the ease with which it lets us combine
existing programs in new ways. We’ll start with a directory called
<code>molecules</code> that contains six files describing some simple
organic molecules. The <code>.pdb</code> extension indicates that these
files are in Protein Data Bank format, a simple text format that
specifies the type and position of each atom in the molecule.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls molecules</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb    ethane.pdb    methane.pdb
octane.pdb    pentane.pdb   propane.pdb</code></pre>
</div>
<p>Let’s go into that directory with <code>cd</code> and run the command
<code>wc *.pdb</code>. <code>wc</code> is the ‘word count’ command: it
counts the number of lines, words, and characters in files (from left to
right, in that order).</p>
<p>The <code>*</code> in <code>*.pdb</code> matches zero or more
characters, so the shell turns <code>*.pdb</code> into a list of all
<code>.pdb</code> files in the current directory:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd molecules</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wc <span class="pp">*</span>.pdb</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  20  156  1158  cubane.pdb
  12  84   622   ethane.pdb
   9  57   422   methane.pdb
  30  246  1828  octane.pdb
  21  165  1226  pentane.pdb
  15  111  825   propane.pdb
 107  819  6081  total</code></pre>
</div>
<p>Note that <code>wc *.pdb</code> also shows the total number of all
lines in the last line of the output.</p>
<p>If we run <code>wc -l</code> instead of just <code>wc</code>, the
output shows only the number of lines per file:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  20  cubane.pdb
  12  ethane.pdb
   9  methane.pdb
  30  octane.pdb
  21  pentane.pdb
  15  propane.pdb
 107  total</code></pre>
</div>
<div id="why-isnt-it-doing-anything" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="why-isnt-it-doing-anything" class="callout-inner">
<h3 class="callout-title">Why Isn’t It Doing Anything?<a class="anchor" aria-label="anchor" href="#why-isnt-it-doing-anything"></a>
</h3>
<div class="callout-content">
<p>What happens if a command is supposed to process a file, but we don’t
give it a filename? For example, what if we type:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span></span></code></pre>
</div>
<p>but don’t type <code>*.pdb</code> (or anything else) after the
command? Since it doesn’t have any filenames, <code>wc</code> assumes it
is supposed to process input given at the command prompt, so it just
sits there and waits for us to give it some data interactively. From the
outside, though, all we see is it sitting there: the command doesn’t
appear to do anything.</p>
<p>If you make this kind of mistake, you can escape out of this state by
holding down the control key (<kbd>Ctrl</kbd>) and typing the letter
<kbd>C</kbd> once and letting go of the <kbd>Ctrl</kbd> key.
<kbd>Ctrl</kbd>+<kbd>C</kbd></p>
</div>
</div>
</div>
<p>We can also use <code>-w</code> to get only the number of words, or
<code>-c</code> to get only the number of characters.</p>
<p>Which of these files contains the fewest lines? It’s an easy question
to answer when there are only six files, but what if there were 6000?
Our first step toward a solution is to run the command:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb <span class="op">&gt;</span> lengths.txt</span></code></pre>
</div>
<p>The greater than symbol, <code>&gt;</code>, tells the shell to
<strong>redirect</strong> the command’s output to a file instead of
printing it to the screen. (This is why there is no screen output:
everything that <code>wc</code> would have printed has gone into the
file <code>lengths.txt</code> instead.) The shell will create the file
if it doesn’t exist. If the file exists, it will be silently
overwritten, which may lead to data loss and thus requires some caution.
<code>ls lengths.txt</code> confirms that the file exists:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls lengths.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">lengths.txt</span></span></code></pre>
</div>
<p>We can now send the content of <code>lengths.txt</code> to the screen
using <code>cat lengths.txt</code>. The <code>cat</code> command gets
its name from ‘concatenate’ i.e. join together, and it prints the
contents of files one after another. There’s only one file in this case,
so <code>cat</code> just shows us what it contains:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cat lengths.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  20  cubane.pdb
  12  ethane.pdb
   9  methane.pdb
  30  octane.pdb
  21  pentane.pdb
  15  propane.pdb
 107  total</code></pre>
</div>
<div id="output-page-by-page" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="output-page-by-page" class="callout-inner">
<h3 class="callout-title">Output Page by Page<a class="anchor" aria-label="anchor" href="#output-page-by-page"></a>
</h3>
<div class="callout-content">
<p>We’ll continue to use <code>cat</code> in this lesson, for
convenience and consistency, but it has the disadvantage that it always
dumps the whole file onto your screen. More useful in practice is the
command <code>less</code>, which you use with
<code>less lengths.txt</code>. This displays a screenful of the file,
and then stops. You can go forward one screenful by pressing the
spacebar, or back one by pressing <code>b</code>. Press <code>q</code>
to quit.</p>
</div>
</div>
</div>
<p>Now let’s use the <code>sort</code> command to sort its contents.</p>
<div id="what-does-sort--n-do" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="what-does-sort--n-do" class="callout-inner">
<h3 class="callout-title">What Does <code>sort -n</code> Do?<a class="anchor" aria-label="anchor" href="#what-does-sort--n-do"></a>
</h3>
<div class="callout-content">
<p>If we run <code>sort</code> on a file containing the following
lines:</p>
<pre class="source"><code><span><span class="fl">10</span></span>
<span><span class="fl">2</span></span>
<span><span class="fl">19</span></span>
<span><span class="fl">22</span></span>
<span><span class="fl">6</span></span></code></pre>
<p>the output is:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">10</span></span>
<span><span class="fl">19</span></span>
<span><span class="fl">2</span></span>
<span><span class="fl">22</span></span>
<span><span class="fl">6</span></span></code></pre>
</div>
<p>If we run <code>sort -n</code> on the same input, we get this
instead:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">2</span></span>
<span><span class="fl">6</span></span>
<span><span class="fl">10</span></span>
<span><span class="fl">19</span></span>
<span><span class="fl">22</span></span></code></pre>
</div>
<p>Explain why <code>-n</code> has this effect.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The <code>-n</code> option specifies a numerical rather than an
alphanumerical sort.</p>
</div>
</div>
</div>
</div>
<p>We will also use the <code>-n</code> option to specify that the sort
is numerical instead of alphanumerical. This does <em>not</em> change
the file; instead, it sends the sorted result to the screen:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> lengths.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  9  methane.pdb
 12  ethane.pdb
 15  propane.pdb
 20  cubane.pdb
 21  pentane.pdb
 30  octane.pdb
107  total</code></pre>
</div>
<p>We can put the sorted list of lines in another temporary file called
<code>sorted-lengths.txt</code> by putting
<code>&gt; sorted-lengths.txt</code> after the command, just as we used
<code>&gt; lengths.txt</code> to put the output of <code>wc</code> into
<code>lengths.txt</code>. Once we’ve done that, we can run another
command called <code>head</code> to get the first few lines in
<code>sorted-lengths.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> lengths.txt <span class="op">&gt;</span> sorted-lengths.txt</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 1 sorted-lengths.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  9  methane.pdb</code></pre>
</div>
<p>Using <code>-n 1</code> with <code>head</code> tells it that we only
want the first line of the file; <code>-n 20</code> would get the first
20, and so on. Since <code>sorted-lengths.txt</code> contains the
lengths of our files ordered from least to greatest, the output of
<code>head</code> must be the file with the fewest lines.</p>
<div id="redirecting-to-the-same-file" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="redirecting-to-the-same-file" class="callout-inner">
<h3 class="callout-title">Redirecting to the same file<a class="anchor" aria-label="anchor" href="#redirecting-to-the-same-file"></a>
</h3>
<div class="callout-content">
<p>It’s a very bad idea to try redirecting the output of a command that
operates on a file to the same file. For example:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> lengths.txt <span class="op">&gt;</span> lengths.txt</span></code></pre>
</div>
<p>Doing something like this may give you incorrect results and/or
delete the contents of <code>lengths.txt</code>.</p>
</div>
</div>
</div>
<div id="what-does-mean" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="what-does-mean" class="callout-inner">
<h3 class="callout-title">What Does <code>&gt;&gt;</code> Mean?<a class="anchor" aria-label="anchor" href="#what-does-mean"></a>
</h3>
<div class="callout-content">
<p>We have seen the use of <code>&gt;</code>, but there is a similar
operator <code>&gt;&gt;</code> which works slightly differently. We’ll
learn about the differences between these two operators by printing some
strings. We can use the <code>echo</code> command to print strings
e.g.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo The echo command prints text</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The echo command prints text</code></pre>
</div>
<p>Now test the commands below to reveal the difference between the two
operators:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo hello <span class="op">&gt;</span> testfile01.txt</span></code></pre>
</div>
<p>and:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo hello <span class="op">&gt;&gt;</span> testfile02.txt</span></code></pre>
</div>
<p>Hint: Try executing each command twice in a row and then examining
the output files.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>In the first example with <code>&gt;</code>, the string ‘hello’ is
written to <code>testfile01.txt</code>, but the file gets overwritten
each time we run the command.</p>
<p>We see from the second example that the <code>&gt;&gt;</code>
operator also writes ‘hello’ to a file (in this
case<code>testfile02.txt</code>), but appends the string to the file if
it already exists (i.e. when we run it for the second time).</p>
</div>
</div>
</div>
</div>
<div id="appending-data" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="appending-data" class="callout-inner">
<h3 class="callout-title">Appending Data<a class="anchor" aria-label="anchor" href="#appending-data"></a>
</h3>
<div class="callout-content">
<p>We have already met the <code>head</code> command, which prints lines
from the start of a file. <code>tail</code> is similar, but prints lines
from the end of a file instead.</p>
<p>Consider the file <code>data-shell/data/animals.txt</code>. After
these commands, select the answer that corresponds to the file
<code>animals-subset.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 3 animals.txt <span class="op">&gt;</span> animals-subset.txt</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> tail <span class="at">-n</span> 2 animals.txt <span class="op">&gt;&gt;</span> animals-subset.txt</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>The first three lines of <code>animals.txt</code>
</li>
<li>The last two lines of <code>animals.txt</code>
</li>
<li>The first three lines and the last two lines of
<code>animals.txt</code>
</li>
<li>The second and third lines of <code>animals.txt</code>
</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<p>Option 3 is correct. For option 1 to be correct we would only run the
<code>head</code> command. For option 2 to be correct we would only run
the <code>tail</code> command. For option 4 to be correct we would have
to pipe the output of <code>head</code> into <code>tail -n 2</code> by
doing
<code>head -n 3 animals.txt | tail -n 2 &gt; animals-subset.txt</code></p>
</div>
</div>
</div>
</div>
<p>If you think this is confusing, you’re in good company: even once you
understand what <code>wc</code>, <code>sort</code>, and
<code>head</code> do, all those intermediate files make it hard to
follow what’s going on. We can make it easier to understand by running
<code>sort</code> and <code>head</code> together:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> sort <span class="at">-n</span> lengths.txt <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  9  methane.pdb</code></pre>
</div>
<p>The vertical bar, <code>|</code>, between the two commands is called
a <strong>pipe</strong>. It tells the shell that we want to use the
output of the command on the left as the input to the command on the
right.</p>
<p>Nothing prevents us from chaining pipes consecutively. That is, we
can for example send the output of <code>wc</code> directly to
<code>sort</code>, and then the resulting output to <code>head</code>.
Thus we first use a pipe to send the output of <code>wc</code> to
<code>sort</code>:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   9 methane.pdb
  12 ethane.pdb
  15 propane.pdb
  20 cubane.pdb
  21 pentane.pdb
  30 octane.pdb
 107 total</code></pre>
</div>
<p>And now we send the output of this pipe, through another pipe, to
<code>head</code>, so that the full pipeline becomes:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>   9  methane.pdb</code></pre>
</div>
<p>This is exactly like a mathematician nesting functions like
<em>log(3x)</em> and saying ‘the log of three times <em>x</em>’. In our
case, the calculation is ‘head of sort of line count of
<code>*.pdb</code>’.</p>
<p>The redirection and pipes used in the last few commands are
illustrated below:</p>
<figure><img src="../fig/redirects-and-pipes.png" alt="Redirects and Pipes" class="figure mx-auto d-block"></figure><div id="piping-commands-together" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="piping-commands-together" class="callout-inner">
<h3 class="callout-title">Piping Commands Together<a class="anchor" aria-label="anchor" href="#piping-commands-together"></a>
</h3>
<div class="callout-content">
<p>In our current directory, we want to find the 3 files which have the
least number of lines. Which command listed below would work?</p>
<ol style="list-style-type: decimal">
<li><code>wc -l * &gt; sort -n &gt; head -n 3</code></li>
<li><code>wc -l * | sort -n | head -n 1-3</code></li>
<li><code>wc -l * | head -n 3 | sort -n</code></li>
<li><code>wc -l * | sort -n | head -n 3</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>Option 4 is the solution. The pipe character <code>|</code> is used
to connect the output from one command to the input of another.
<code>&gt;</code> is used to redirect standard output to a file. Try it
in the <code>data-shell/molecules</code> directory!</p>
</div>
</div>
</div>
</div>
<p>This idea of linking programs together is why Unix has been so
successful. Instead of creating enormous programs that try to do many
different things, Unix programmers focus on creating lots of simple
tools that each do one job well, and that work well with each other.
This programming model is called ‘pipes and filters’. We’ve already seen
pipes; a <strong>filter</strong> is a program like <code>wc</code> or
<code>sort</code> that transforms a stream of input into a stream of
output. Almost all of the standard Unix tools can work this way: unless
told to do otherwise, they read from standard input, do something with
what they’ve read, and write to standard output.</p>
<p>The key is that any program that reads lines of text from standard
input and writes lines of text to standard output can be combined with
every other program that behaves this way as well. You can <em>and
should</em> write your programs this way so that you and other people
can put those programs into pipes to multiply their power.</p>
<div id="pipe-reading-comprehension" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="pipe-reading-comprehension" class="callout-inner">
<h3 class="callout-title">Pipe Reading Comprehension<a class="anchor" aria-label="anchor" href="#pipe-reading-comprehension"></a>
</h3>
<div class="callout-content">
<p>A file called <code>animals.txt</code> (in the
<code>data-shell/data</code> folder) contains the following data:</p>
<pre class="source"><code>2012-11-05,deer
2012-11-05,rabbit
2012-11-05,raccoon
2012-11-06,rabbit
2012-11-06,deer
2012-11-06,fox
2012-11-07,rabbit
2012-11-07,bear</code></pre>
<p>What text passes through each of the pipes and the final redirect in
the pipeline below?</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cat animals.txt <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 5 <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 3 <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-r</span> <span class="op">&gt;</span> final.txt</span></code></pre>
</div>
<p>Hint: build the pipeline up one command at a time to test your
understanding</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<p>The <code>head</code> command extracts the first 5 lines from
<code>animals.txt</code>. Then, the last 3 lines are extracted from the
previous 5 by using the <code>tail</code> command. With the
<code>sort -r</code> command those 3 lines are sorted in reverse order
and finally, the output is redirected to a file <code>final.txt</code>.
The content of this file can be checked by executing
<code>cat final.txt</code>. The file should contain the following
lines:</p>
<pre class="source"><code>2012-11-06,rabbit
2012-11-06,deer
2012-11-05,raccoon</code></pre>
</div>
</div>
</div>
</div>
<div id="pipe-construction" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="pipe-construction" class="callout-inner">
<h3 class="callout-title">Pipe Construction<a class="anchor" aria-label="anchor" href="#pipe-construction"></a>
</h3>
<div class="callout-content">
<p>For the file <code>animals.txt</code> from the previous exercise,
consider the following command:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-d</span> , <span class="at">-f</span> 2 animals.txt</span></code></pre>
</div>
<p>The <code>cut</code> command is used to remove or ‘cut out’ certain
sections of each line in the file, and <code>cut</code> expects the
lines to be separated into columns by a <kbd>Tab</kbd> character. A
character used in this way is a called a <strong>delimiter</strong>. In
the example above we use the <code>-d</code> option to specify the comma
as our delimiter character. We have also used the <code>-f</code> option
to specify that we want to extract the second field (column). This gives
the following output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">deer</span></span>
<span><span class="va">rabbit</span></span>
<span><span class="va">raccoon</span></span>
<span><span class="va">rabbit</span></span>
<span><span class="va">deer</span></span>
<span><span class="va">fox</span></span>
<span><span class="va">rabbit</span></span>
<span><span class="va">bear</span></span></code></pre>
</div>
<p>The <code>uniq</code> command filters out adjacent matching lines in
a file. How could you extend this pipeline (using <code>uniq</code> and
another command) to find out what animals the file contains (without any
duplicates in their names)?</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cut <span class="at">-d</span> , <span class="at">-f</span> 2 animals.txt <span class="kw">|</span> <span class="fu">sort</span> <span class="kw">|</span> <span class="fu">uniq</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="which-pipe" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="which-pipe" class="callout-inner">
<h3 class="callout-title">Which Pipe?<a class="anchor" aria-label="anchor" href="#which-pipe"></a>
</h3>
<div class="callout-content">
<p>The file <code>animals.txt</code> contains 8 lines of data formatted
as follows:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2012-11-05,deer
2012-11-05,rabbit
2012-11-05,raccoon
2012-11-06,rabbit
...</code></pre>
</div>
<p>The <code>uniq</code> command has a <code>-c</code> option which
gives a count of the number of times a line occurs in its input.
Assuming your current directory is <code>data-shell/data/</code>, what
command would you use to produce a table that shows the total count of
each type of animal in the file?</p>
<ol style="list-style-type: decimal">
<li><code>sort animals.txt | uniq -c</code></li>
<li><code>sort -t, -k2,2 animals.txt | uniq -c</code></li>
<li><code>cut -d, -f 2 animals.txt | uniq -c</code></li>
<li><code>cut -d, -f 2 animals.txt | sort | uniq -c</code></li>
<li><code>cut -d, -f 2 animals.txt | sort | uniq -c | wc -l</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" aria-labelledby="headingSolution7" data-bs-parent="#accordionSolution7">
<div class="accordion-body">
<p>Option 4. is the correct answer. If you have difficulty understanding
why, try running the commands, or sub-sections of the pipelines (make
sure you are in the <code>data-shell/data</code> directory).</p>
</div>
</div>
</div>
</div>
<section id="nelles-pipeline-checking-files"><h2 class="section-heading">Nelle’s Pipeline: Checking Files<a class="anchor" aria-label="anchor" href="#nelles-pipeline-checking-files"></a>
</h2>
<hr class="half-width">
<p>Nelle has run her samples through the assay machines and created 17
files in the <code>north-pacific-gyre/2012-07-03</code> directory
described earlier. As a quick sanity check, starting from her home
directory, Nelle types:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd north-pacific-gyre/2012-07-03</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.txt</span></code></pre>
</div>
<p>The output is 18 lines that look like this:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>300 NENE01729A.txt
300 NENE01729B.txt
300 NENE01736A.txt
300 NENE01751A.txt
300 NENE01751B.txt
300 NENE01812A.txt
... ...</code></pre>
</div>
<p>Now she types this:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.txt <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> 240 NENE02018B.txt
 300 NENE01729A.txt
 300 NENE01729B.txt
 300 NENE01736A.txt
 300 NENE01751A.txt</code></pre>
</div>
<p>Whoops: one of the files is 60 lines shorter than the others. When
she goes back and checks it, she sees that she did that assay at 8:00 on
a Monday morning — someone was probably in using the machine on the
weekend, and she forgot to reset it. Before re-running that sample, she
checks to see if any files have too much data:</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.txt <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code> 300 NENE02040B.txt
 300 NENE02040Z.txt
 300 NENE02043A.txt
 300 NENE02043B.txt
5040 total</code></pre>
</div>
<p>Those numbers look good — but what’s that ‘Z’ doing there in the
third-to-last line? All of her samples should be marked ‘A’ or ‘B’; by
convention, her lab uses ‘Z’ to indicate samples with missing
information. To find others like it, she does this:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="pp">*</span>Z.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>NENE01971Z.txt    NENE02040Z.txt</code></pre>
</div>
<p>Sure enough, when she checks the log on her laptop, there’s no depth
recorded for either of those samples. Since it’s too late to get the
information any other way, she must exclude those two files from her
analysis. She could delete them using <code>rm</code>, but there are
actually some analyses she might do later where depth doesn’t matter, so
instead, she’ll have to be careful later on to select files using the
wildcard expression <code>*[AB].txt</code>. As always, the
<code>*</code> matches any number of characters; the expression
<code>[AB]</code> matches either an ‘A’ or a ‘B’, so this matches all
the valid data files she has.</p>
<div id="wildcard-expressions" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="wildcard-expressions" class="callout-inner">
<h3 class="callout-title">Wildcard Expressions<a class="anchor" aria-label="anchor" href="#wildcard-expressions"></a>
</h3>
<div class="callout-content">
<p>Wildcard expressions can be very complex, but you can sometimes write
them in ways that only use simple syntax, at the expense of being a bit
more verbose. Consider the directory
<code>data-shell/north-pacific-gyre/2012-07-03</code> : the wildcard
expression <code>*[AB].txt</code> matches all files ending in
<code>A.txt</code> or <code>B.txt</code>. Imagine you forgot about
this.</p>
<ol style="list-style-type: decimal">
<li><p>Can you match the same set of files with basic wildcard
expressions that do not use the <code>[]</code> syntax? <em>Hint</em>:
You may need more than one expression.</p></li>
<li><p>The expression that you found and the expression from the lesson
match the same set of files in this example. What is the small
difference between the outputs?</p></li>
<li><p>Under what circumstances would your new expression produce an
error message where the original one would not?</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" aria-labelledby="headingSolution8" data-bs-parent="#accordionSolution8">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>A solution using two wildcard expressions:</li>
</ol>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="pp">*</span>A.txt</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ls <span class="pp">*</span>B.txt</span></code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>The output from the new commands is separated because there are two
commands.</li>
<li>When there are no files ending in <code>A.txt</code>, or there are
no files ending in <code>B.txt</code>.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="removing-unneeded-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="removing-unneeded-files" class="callout-inner">
<h3 class="callout-title">Removing Unneeded Files<a class="anchor" aria-label="anchor" href="#removing-unneeded-files"></a>
</h3>
<div class="callout-content">
<p>Suppose you want to delete your processed data files, and only keep
your raw files and processing script to save storage. The raw files end
in <code>.dat</code> and the processed files end in <code>.txt</code>.
Which of the following would remove all the processed data files, and
<em>only</em> the processed data files?</p>
<ol style="list-style-type: decimal">
<li><code>rm ?.txt</code></li>
<li><code>rm *.txt</code></li>
<li><code>rm * .txt</code></li>
<li><code>rm *.*</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution9" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution9" aria-expanded="false" aria-controls="collapseSolution9">
  <h4 class="accordion-header" id="headingSolution9">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution9" class="accordion-collapse collapse" aria-labelledby="headingSolution9" data-bs-parent="#accordionSolution9">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>This would remove <code>.txt</code> files with one-character
names</li>
<li>This is correct answer</li>
<li>The shell would expand <code>*</code> to match everything in the
current directory, so the command would try to remove all matched files
and an additional file called <code>.txt</code>
</li>
<li>The shell would expand <code>*.*</code> to match all files with any
extension, so this command would delete all files</li>
</ol>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>
<code>cat</code> displays the contents of its inputs.</li>
<li>
<code>head</code> displays the first 10 lines of its input.</li>
<li>
<code>tail</code> displays the last 10 lines of its input.</li>
<li>
<code>sort</code> sorts its inputs.</li>
<li>
<code>wc</code> counts lines, words, and characters in its
inputs.</li>
<li>
<code>command &gt; file</code> redirects a command’s output to a
file (overwriting any existing content).</li>
<li>
<code>command &gt;&gt; file</code> appends a command’s output to a
file.</li>
<li>
<code>first | second</code> is a pipeline: the output of the first
command is used as the input to the second.</li>
<li>The best way to use the shell is to use pipes to combine simple
single-purpose programs (filters).</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-05-script"><p>Content from <a href="05-script.html">Shell Scripts</a></p>
<hr>
<p> Last updated on 2023-11-21 | 
        
        <a href="https://github.com/zkamvar/mdf-shell-novice/edit/main/episodes/05-script.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 45 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I save and re-use commands?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Write a shell script that runs a command or series of commands for a
fixed set of files.</li>
<li>Run a shell script from the command line.</li>
<li>Write a shell script that operates on a set of files defined by the
user on the command line.</li>
<li>Create pipelines that include shell scripts you, and others, have
written.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>We are finally ready to see what makes the shell such a powerful
programming environment. We are going to take the commands we repeat
frequently and save them in files so that we can re-run all those
operations again later by typing a single command. For historical
reasons, a bunch of commands saved in a file is usually called a
<strong>shell script</strong>, but make no mistake: these are actually
small programs.</p>
<div id="script-file-format" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="script-file-format" class="callout-inner">
<h3 class="callout-title">Script File Format<a class="anchor" aria-label="anchor" href="#script-file-format"></a>
</h3>
<div class="callout-content">

</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nano myscript.sh</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co"># filename: myscript.sh</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># This is our first script</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Hello world!"</span> <span class="co"># This is a comment too</span></span></code></pre>
</div>
<div id="comments" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="comments" class="callout-inner">
<h3 class="callout-title">Comments<a class="anchor" aria-label="anchor" href="#comments"></a>
</h3>
<div class="callout-content">
<p>Comments start with the symbol #. Anything after the # is not get
executed.</p>
</div>
</div>
</div>
<p>Then we save the file (<code>Ctrl-O</code> in nano), and exit the
text editor (<code>Ctrl-X</code> in nano).</p>
<p>Once we have saved the file, we need to change the file permission to
execute. This is done using chmod as:</p>
<pre class="source"><code>$ chmod +x myscript.sh</code></pre>
<p>Now, we run the following command:</p>
<pre class="source"><code>$ ./myscript.sh
Hello world!</code></pre>
<div id="variables" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="variables" class="callout-inner">
<h3 class="callout-title">Variables<a class="anchor" aria-label="anchor" href="#variables"></a>
</h3>
<div class="callout-content">
<p>A variable is a placeholder for the data. In shell script, variables
are as</p>
<ul>
<li>variableName=variable value (<strong>Note: No spaces on either side
of the = sign</strong>).</li>
<li>While calling the varible, <code>$</code> sign must be called before
the variable name.</li>
<li>Variable can be also called using curly
braces,<code>${}</code>.</li>
</ul>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># filename: myscript.sh</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co"># This is our first script</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Hello world!"</span> <span class="co"># This is a comment too</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Varaibles</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="va">name</span><span class="op">=</span><span class="st">"John"</span> <span class="co"># no spaces on either side of the = sign</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> Hello <span class="va">$name</span> </span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co"># OR</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> Hello <span class="va">${name}</span> </span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ./myscript.sh</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">Hello</span> world!</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="ex">Hello</span> John</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Hello</span> John</span></code></pre>
</div>
<p>Let’s start by going back to <code>molecules/</code> and creating a
new file, <code>middle.sh</code> which will become our shell script:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd molecules</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre>
</div>
<p>The command <code>nano middle.sh</code> opens the file
<code>middle.sh</code> within the text editor ‘nano’ (which runs within
the shell). If the file does not exist, it will be created. We can use
the text editor to directly edit the file – we’ll simply insert the
following line:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># filename: middle.sh</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> <span class="at">-n</span> 15 octane.pdb <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5</span></code></pre>
</div>
<p>This is a variation on the pipe we constructed earlier: it selects
lines 11-15 of the file <code>octane.pdb</code>. Remember, we are
<em>not</em> running it as a command just yet: we are putting the
commands in a file.</p>
<p>Then we save the file (<code>Ctrl-O</code> in nano), and exit the
text editor (<code>Ctrl-X</code> in nano). Check that the directory
<code>molecules</code> now contains a file called
<code>middle.sh</code>.</p>
<p>Once we have saved the file, we need to change the file permission to
execute. This is done using chmod as:</p>
<pre class="source"><code>chmod +x middle.sh</code></pre>
<p>Now, we can ask the shell to execute the commands it contains. so we
run the following command:</p>
<p><code>{.bash, info=source} $ ./middle.sh</code></p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ATOM      9  H           1      -4.502   0.681   0.785  1.00  0.00
ATOM     10  H           1      -5.254  -0.243  -0.537  1.00  0.00
ATOM     11  H           1      -4.357   1.252  -0.895  1.00  0.00
ATOM     12  H           1      -3.009  -0.741  -1.467  1.00  0.00
ATOM     13  H           1      -3.172  -1.337   0.206  1.00  0.00</code></pre>
</div>
<p>Sure enough, our script’s output is exactly what we would get if we
ran that pipeline directly.</p>
<div id="text-vs.-whatever" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="text-vs.-whatever" class="callout-inner">
<h3 class="callout-title">Text vs. Whatever<a class="anchor" aria-label="anchor" href="#text-vs.-whatever"></a>
</h3>
<div class="callout-content">
<p>We usually call programs like Microsoft Word or LibreOffice Writer
“text editors”, but we need to be a bit more careful when it comes to
programming. By default, Microsoft Word uses <code>.docx</code> files to
store not only text, but also formatting information about fonts,
headings, and so on. This extra information isn’t stored as characters,
and doesn’t mean anything to tools like <code>head</code>: they expect
input files to contain nothing but the letters, digits, and punctuation
on a standard computer keyboard. When editing programs, therefore, you
must either use a plain text editor, or be careful to save files as
plain text.</p>
</div>
</div>
</div>
<p>In the above script, we have selected 11-15 line from the octane.pdb.
What if we want to select lines from an arbitrary file? We could edit
<code>middle.sh</code> each time to change the filename, but that would
probably take longer than typing the command out again in the shell and
executing it with a new file name. Instead, let’s edit
<code>middle.sh</code> and make it more versatile:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre>
</div>
<p>Now, within “nano”, replace the text <code>octane.pdb</code> with the
special variable called <code>$1</code>:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># filename: middle.sh</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> <span class="at">-n</span> 15 <span class="st">"</span><span class="va">$1</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5  <span class="co"># octane.pdb -&gt; $1</span></span></code></pre>
</div>
<p>Inside a shell script, <code>$1</code> means ‘the first filename (or
other argument) on the command line’.</p>
<div id="command-line-arguments" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="command-line-arguments" class="callout-inner">
<h3 class="callout-title">Command line arguments<a class="anchor" aria-label="anchor" href="#command-line-arguments"></a>
</h3>
<div class="callout-content">
<ul>
<li>
<code>$0</code>: The name of the script.</li>
<li>
<code>$1</code>-<code>$9</code>:<code>$1</code> is the first
argument, <code>$2</code> is the second and so on.</li>
<li>
<code>$#</code>: How many command line arguments were given to the
script.</li>
<li>
<code>$*</code>: All of the command line arguments.</li>
</ul>
</div>
</div>
</div>
<p>We can now run our script like this:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ./middle.sh octane.pdb</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ATOM      9  H           1      -4.502   0.681   0.785  1.00  0.00
ATOM     10  H           1      -5.254  -0.243  -0.537  1.00  0.00
ATOM     11  H           1      -4.357   1.252  -0.895  1.00  0.00
ATOM     12  H           1      -3.009  -0.741  -1.467  1.00  0.00
ATOM     13  H           1      -3.172  -1.337   0.206  1.00  0.00</code></pre>
</div>
<p>or on a different file like this:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ./middle.sh pentane.pdb</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ATOM      9  H           1       1.324   0.350  -1.332  1.00  0.00
ATOM     10  H           1       1.271   1.378   0.122  1.00  0.00
ATOM     11  H           1      -0.074  -0.384   1.288  1.00  0.00
ATOM     12  H           1      -0.048  -1.362  -0.205  1.00  0.00
ATOM     13  H           1      -1.183   0.500  -1.412  1.00  0.00</code></pre>
</div>
<div id="double-quotes-around-arguments" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="double-quotes-around-arguments" class="callout-inner">
<h3 class="callout-title">Double-Quotes Around Arguments<a class="anchor" aria-label="anchor" href="#double-quotes-around-arguments"></a>
</h3>
<div class="callout-content">
<p>For the same reason that we put the loop variable inside
double-quotes, in case the filename happens to contain any spaces, we
surround <code>$1</code> with double-quotes.</p>
</div>
</div>
</div>
<p>We still need to edit <code>middle.sh</code> each time we want to
adjust the range of lines, though. Let’s fix that by using the special
variables <code>$2</code> and <code>$3</code> for the number of lines to
be passed to <code>head</code> and <code>tail</code> respectively:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># filename: middle.sh</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># head -n 15 octane.pdb | tail -n 5</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> <span class="at">-n</span> <span class="st">"</span><span class="va">$2</span><span class="st">"</span> <span class="st">"</span><span class="va">$1</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> <span class="st">"</span><span class="va">$3</span><span class="st">"</span>  <span class="co"># $1 = filename,   line-range=($2-$3) to $2</span></span></code></pre>
</div>
<p>We can now run:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ./middle.sh pentane.pdb 15 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ATOM      9  H           1       1.324   0.350  -1.332  1.00  0.00
ATOM     10  H           1       1.271   1.378   0.122  1.00  0.00
ATOM     11  H           1      -0.074  -0.384   1.288  1.00  0.00
ATOM     12  H           1      -0.048  -1.362  -0.205  1.00  0.00
ATOM     13  H           1      -1.183   0.500  -1.412  1.00  0.00</code></pre>
</div>
<p>By changing the arguments to our command we can change our script’s
behaviour:</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> bash middle.sh pentane.pdb 20 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>ATOM     14  H           1      -1.259   1.420   0.112  1.00  0.00
ATOM     15  H           1      -2.608  -0.407   1.130  1.00  0.00
ATOM     16  H           1      -2.540  -1.303  -0.404  1.00  0.00
ATOM     17  H           1      -3.393   0.254  -0.321  1.00  0.00
TER      18              1</code></pre>
</div>
<p>This works, but it may take the next person who reads
<code>middle.sh</code> a moment to figure out what it does. We can
improve our script by adding some <strong>comments</strong> at the
top:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nano middle.sh</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># filename: middle.sh</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Select lines from the middle of a file.</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage: bash middle.sh filename end_line num_lines</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> <span class="at">-n</span> <span class="st">"</span><span class="va">$2</span><span class="st">"</span> <span class="st">"</span><span class="va">$1</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> <span class="st">"</span><span class="va">$3</span><span class="st">"</span></span></code></pre>
</div>
<p>A comment starts with a <code>#</code> character and runs to the end
of the line. The computer ignores comments, but they’re invaluable for
helping people (including your future self) understand and use scripts.
The only caveat is that each time you modify the script, you should
check that the comment is still accurate: an explanation that sends the
reader in the wrong direction is worse than none at all.</p>
<p>What if we want to process many files in a single pipeline? For
example, if we want to sort our <code>.pdb</code> files by length, we
would type:</p>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="pp">*</span>.pdb <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span></span></code></pre>
</div>
<p>because <code>wc -l</code> lists the number of lines in the files
(recall that <code>wc</code> stands for ‘word count’, adding the
<code>-l</code> option means ‘count lines’ instead) and
<code>sort -n</code> sorts things numerically. We could put this in a
file, but then it would only ever sort a list of <code>.pdb</code> files
in the current directory. If we want to be able to get a sorted list of
other kinds of files, we need a way to get all those names into the
script. We can’t use <code>$1</code>, <code>$2</code>, and so on because
we don’t know how many files there are. Instead, we use the special
variable <code>$@</code>, which means, ‘All of the command-line
arguments to the shell script’. We also should put <code>$@</code>
inside double-quotes to handle the case of arguments containing spaces
(<code>"$@"</code> is equivalent to <code>"$1"</code> <code>"$2"</code>
…) Here’s an example:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> nano sorted.sh</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co">#filename: sorted.sh</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Sort files by their length.</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Usage: bash sorted.sh one_or_more_filenames</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-l</span> <span class="st">"</span><span class="va">$@</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> bash sorted.sh <span class="pp">*</span>.pdb ../creatures/<span class="pp">*</span>.dat</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>9 methane.pdb
12 ethane.pdb
15 propane.pdb
20 cubane.pdb
21 pentane.pdb
30 octane.pdb
163 ../creatures/basilisk.dat
163 ../creatures/minotaur.dat
163 ../creatures/unicorn.dat
596 total</code></pre>
</div>
<div id="list-unique-species" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="list-unique-species" class="callout-inner">
<h3 class="callout-title">List Unique Species<a class="anchor" aria-label="anchor" href="#list-unique-species"></a>
</h3>
<div class="callout-content">
<p>Leah has several hundred data files, each of which is formatted like
this:</p>
<pre class="source"><code>2013-11-05,deer,5
2013-11-05,rabbit,22
2013-11-05,raccoon,7
2013-11-06,rabbit,19
2013-11-06,deer,2
2013-11-06,fox,1
2013-11-07,rabbit,18
2013-11-07,bear,1</code></pre>
<p>An example of this type of file is given in
<code>data-shell/data/animal-counts/animals.txt</code>.</p>
<p>We can use the command
<code>cut -d , -f 2 animals.txt | sort | uniq</code> to produce the
unique species in <code>animals.txt</code>. In order to avoid having to
type out this series of commands every time, a scientist may choose to
write a shell script instead.</p>
<p>Write a shell script called <code>species.sh</code> that takes any
number of filenames as command-line arguments, and uses a variation of
the above command to print a list of the unique species appearing in
each of those files separately.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<pre class="source"><code># Script to find unique species in csv files where species is the second data field
# This script accepts any number of file names as command line arguments

# Loop over all files
for file in $@
do
	echo "Unique species in $file:"
	# Extract species names
	cut -d , -f 2 $file | sort | uniq
done</code></pre>
</div>
</div>
</div>
</div>
<div id="variables-in-shell-scripts" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="variables-in-shell-scripts" class="callout-inner">
<h3 class="callout-title">Variables in Shell Scripts<a class="anchor" aria-label="anchor" href="#variables-in-shell-scripts"></a>
</h3>
<div class="callout-content">
<p>In the <code>molecules</code> directory, imagine you have a shell
script called <code>script.sh</code> containing the following
commands:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> <span class="at">-n</span> <span class="va">$2</span> <span class="va">$1</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span> <span class="at">-n</span> <span class="va">$3</span> <span class="va">$1</span></span></code></pre>
</div>
<p>While you are in the <code>molecules</code> directory, you type the
following command:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> script.sh <span class="st">'*.pdb'</span> 1 1</span></code></pre>
</div>
<p>Which of the following outputs would you expect to see?</p>
<ol style="list-style-type: decimal">
<li>All of the lines between the first and the last lines of each file
ending in <code>.pdb</code> in the <code>molecules</code> directory</li>
<li>The first and the last line of each file ending in <code>.pdb</code>
in the <code>molecules</code> directory</li>
<li>The first and the last line of each file in the
<code>molecules</code> directory</li>
<li>An error because of the quotes around <code>*.pdb</code>
</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>The correct answer is 2.</p>
<p>The special variables $1, $2 and $3 represent the command line
arguments given to the script, such that the commands run are:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> head <span class="at">-n</span> 1 cubane.pdb ethane.pdb octane.pdb pentane.pdb propane.pdb</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> tail <span class="at">-n</span> 1 cubane.pdb ethane.pdb octane.pdb pentane.pdb propane.pdb</span></code></pre>
</div>
<p>The shell does not expand <code>'*.pdb'</code> because it is enclosed
by quote marks. As such, the first argument to the script is
<code>'*.pdb'</code> which gets expanded within the script by
<code>head</code> and <code>tail</code>.</p>
</div>
</div>
</div>
</div>
<div id="find-the-longest-file-with-a-given-extension" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="find-the-longest-file-with-a-given-extension" class="callout-inner">
<h3 class="callout-title">Find the Longest File With a Given
Extension<a class="anchor" aria-label="anchor" href="#find-the-longest-file-with-a-given-extension"></a>
</h3>
<div class="callout-content">
<p>Write a shell script called <code>longest.sh</code> that takes the
name of a directory and a filename extension as its arguments, and
prints out the name of the file with the most lines in that directory
with that extension. For example:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> bash longest.sh /tmp/data pdb</span></code></pre>
</div>
<p>would print the name of the <code>.pdb</code> file in
<code>/tmp/data</code> that has the most lines.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<pre class="source"><code># Shell script which takes two arguments:
#    1. a directory name
#    2. a file extension
# and prints the name of the file in that directory
# with the most lines which matches the file extension.

wc -l $1/*.$2 | sort -n | tail -n 2 | head -n 1</code></pre>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>Save commands in files (usually called shell scripts) for
re-use.</li>
<li>
<code>bash filename</code> runs the commands saved in a file.</li>
<li>
<code>$@</code> refers to all of a shell script’s command-line
arguments.</li>
<li>
<code>$1</code>, <code>$2</code>, etc., refer to the first
command-line argument, the second command-line argument, etc.</li>
<li>Place variables in quotes if the values might have spaces in
them.</li>
<li>Letting users decide what files to process is more flexible and more
consistent with built-in Unix commands.</li>
</ul>
</div>
</div>
</div></section><section id="aio-06-loop"><p>Content from <a href="06-loop.html">Loops</a></p>
<hr>
<p> Last updated on 2023-11-21 | 
        
        <a href="https://github.com/zkamvar/mdf-shell-novice/edit/main/episodes/06-loop.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 50 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I perform the same actions on many different files?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Write a loop that applies one or more commands separately to each
file in a set of files.</li>
<li>Trace the values taken on by a loop variable during execution of the
loop.</li>
<li>Explain the difference between a variable’s name and its value.</li>
<li>Explain why spaces and some punctuation characters shouldn’t be used
in file names.</li>
<li>Demonstrate how to see what commands have recently been
executed.</li>
<li>Re-run recently executed commands without retyping them.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p><strong>Loops</strong> are a programming construct which allow us to
repeat a command or set of commands for each item in a list. As such
they are key to productivity improvements through automation. Similar to
wildcards and tab completion, using loops also reduces the amount of
typing required (and hence reduces the number of typing mistakes).</p>
<p>Suppose we have several hundred genome data files named
<code>basilisk.dat</code>, <code>minotaur.dat</code>, and
<code>unicorn.dat</code>. For this example, we’ll use the
<code>creatures</code> directory which only has three example files, but
the principles can be applied to many many more files at once.</p>
<p>The structure of these files is the same: the common name,
classification, and updated date are presented on the first three lines,
with DNA sequences on the following lines. Let’s look at the files:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span> <span class="at">-n</span> 5 basilisk.dat minotaur.dat unicorn.dat</span></code></pre>
</div>
<p>We would like to print out the classification for each species, which
is given on the second line of each file. For each file, we would need
to execute the command <code>head -n 2</code> and pipe this to
<code>tail -n 1</code>. We’ll use a loop to solve this problem, but
first let’s look at the general form of a loop:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> thing <span class="kw">in</span> list_of_things</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="ex">operation_using</span> <span class="va">$thing</span>    <span class="co"># Indentation within the loop is not required, but aids legibility</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>and we can apply this to our example. We want to extract the each
species classification, i.e. the second line of the each file.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for filename in basilisk.dat minotaur.dat unicorn.dat</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>    head <span class="ex">-n</span> 2 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>CLASSIFICATION: basiliscus vulgaris
CLASSIFICATION: bos hominus
CLASSIFICATION: equus monoceros</code></pre>
</div>
<div id="follow-the-prompt" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="follow-the-prompt" class="callout-inner">
<h3 class="callout-title">Follow the Prompt<a class="anchor" aria-label="anchor" href="#follow-the-prompt"></a>
</h3>
<div class="callout-content">
<p>The shell prompt changes from <code>$</code> to <code>&gt;</code> and
back again as we were typing in our loop. The second prompt,
<code>&gt;</code>, is different to remind us that we haven’t finished
typing a complete command yet. A semicolon, <code>;</code>, can be used
to separate two commands written on a single line.</p>
</div>
</div>
</div>
<p>When the shell sees the keyword <code>for</code>, it knows to repeat
a command (or group of commands) once for each item in a list. Each time
the loop runs (called an iteration), an item in the list is assigned in
sequence to the <strong>variable</strong>, and the commands inside the
loop are executed, before moving on to the next item in the list. Inside
the loop, we call for the variable’s value by putting <code>$</code> in
front of it. The <code>$</code> tells the shell interpreter to treat the
variable as a variable name and substitute its value in its place,
rather than treat it as text or an external command.</p>
<p>In this example, the list is three filenames:
<code>basilisk.dat</code>, <code>minotaur.dat</code>, and
<code>unicorn.dat</code>. Each time the loop iterates, it will assign a
file name to the variable <code>filename</code> and run the
<code>head</code> command. The first time through the loop,
<code>$filename</code> is <code>basilisk.dat</code>. The interpreter
runs the command <code>head</code> on <code>basilisk.dat</code> and
pipes the first two lines to the <code>tail</code> command, which then
prints the second line of <code>basilisk.dat</code>. For the second
iteration, <code>$filename</code> becomes <code>minotaur.dat</code>.
This time, the shell runs <code>head</code> on <code>monotaur.dat</code>
and pipes the first two lines to the <code>tail</code> command, which
then prints the second line of <code>monotaur.dat</code>. For the third
iteration, <code>$filename</code> becomes <code>unicorn.dat</code>, so
the shell runs the <code>head</code> command on that file, and
<code>tail</code> on the output of that. Since the list was only three
items, the shell exits the <code>for</code> loop.</p>
<div id="same-symbols-different-meanings" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="same-symbols-different-meanings" class="callout-inner">
<h3 class="callout-title">Same Symbols, Different Meanings<a class="anchor" aria-label="anchor" href="#same-symbols-different-meanings"></a>
</h3>
<div class="callout-content">
<p>Here we see <code>&gt;</code> being used a shell prompt, whereas
<code>&gt;</code> is also used to redirect output. Similarly,
<code>$</code> is used as a shell prompt, but, as we saw earlier, it is
also used to ask the shell to get the value of a variable.</p>
<p>If the <em>shell</em> prints <code>&gt;</code> or <code>$</code> then
it expects you to type something, and the symbol is a prompt.</p>
<p>If <em>you</em> type <code>&gt;</code> or <code>$</code> yourself, it
is an instruction from you that the shell should redirect output or get
the value of a variable.</p>
</div>
</div>
</div>
<p>When using variables it is also possible to put the names into curly
braces to clearly delimit the variable name: <code>$filename</code> is
equivalent to <code>${filename}</code>, but is different from
<code>${file}name</code>. You may find this notation in other people’s
programs.</p>
<p>We run loop in terminal, which is quite handy when the loop is small.
As the task inside the loop grows, it becomes hard to write/edit loop in
the terminal. For example, if you try to make change to the last loop,
by pressing up arrow key, all the text of the loop arranges in single
line, that make hard make changes and it is more prone to error. So it
is always good to write a script file.</p>
<p>Let’s create a shell-script named <code>classification.sh</code>:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># filename: classification.sh</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> basilisk.dat minotaur.dat unicorn.dat</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">head</span> <span class="at">-n</span> 2 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1  <span class="co"># calling variable with $ symbol</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>Here, filename is a variable, which keeps updating after each
iteration. Let’s run the:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> chmod +x classification.sh</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> ./classification.sh</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>CLASSIFICATION: basiliscus vulgaris
CLASSIFICATION: bos hominus
CLASSIFICATION: equus monoceros</code></pre>
</div>
<p>We have called the variable in this loop <code>filename</code> in
order to make its purpose clearer to human readers. The shell itself
doesn’t care what the variable is called; if we wrote this loop as:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co"># filename: classification.sh</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> x <span class="kw">in</span> basilisk.dat minotaur.dat unicorn.dat</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>   <span class="fu">head</span> <span class="at">-n</span> 2 <span class="va">$x</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 1</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>it would work exactly the same way. <em>Don’t do this.</em> Programs
are only useful if people can understand them, so meaningless names
(like <code>x</code>) or misleading names increase the odds that the
program won’t do what its readers think it does.</p>
<div id="variables-in-loops" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="variables-in-loops" class="callout-inner">
<h3 class="callout-title">Variables in Loops<a class="anchor" aria-label="anchor" href="#variables-in-loops"></a>
</h3>
<div class="callout-content">
<p>This exercise refers to the <code>data-shell/molecules</code>
directory. <code>ls</code> gives the following output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</code></pre>
</div>
<p>What is the output of the following code?</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>    ls <span class="ex">*.pdb</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Now, what is the output of the following code?</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for datafile in <span class="pp">*</span>.pdb</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>	ls <span class="va">$datafile</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>Why do these two loops give different outputs?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>The first code block gives the same output on each iteration through
the loop. Bash expands the wildcard <code>*.pdb</code> within the loop
body (as well as before the loop starts) to match all files ending in
<code>.pdb</code> and then lists them using <code>ls</code>. The
expanded loop would look like this:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for datafile in cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>	ls <span class="ex">cubane.pdb</span>  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb
cubane.pdb  ethane.pdb  methane.pdb  octane.pdb  pentane.pdb  propane.pdb</code></pre>
</div>
<p>The second code block lists a different file on each loop iteration.
The value of the <code>datafile</code> variable is evaluated using
<code>$datafile</code>, and then listed using <code>ls</code>.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">cubane.pdb</span></span>
<span><span class="va">ethane.pdb</span></span>
<span><span class="va">methane.pdb</span></span>
<span><span class="va">octane.pdb</span></span>
<span><span class="va">pentane.pdb</span></span>
<span><span class="va">propane.pdb</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="limiting-sets-of-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="limiting-sets-of-files" class="callout-inner">
<h3 class="callout-title">Limiting Sets of Files<a class="anchor" aria-label="anchor" href="#limiting-sets-of-files"></a>
</h3>
<div class="callout-content">
<p>What would be the output of running the following loop in the
<code>data-shell/molecules</code> directory?</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for filename in c<span class="pp">*</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>    ls <span class="va">$filename</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>No files are listed.</li>
<li>All files are listed.</li>
<li>Only <code>cubane.pdb</code>, <code>octane.pdb</code> and
<code>pentane.pdb</code> are listed.</li>
<li>Only <code>cubane.pdb</code> is listed.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>4 is the correct answer. <code>*</code> matches zero or more
characters, so any file name starting with the letter c, followed by
zero or more other characters will be matched.</p>
</div>
</div>
</div>
</div>
<div id="limiting-sets-of-files" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="limiting-sets-of-files" class="callout-inner">
<h3 class="callout-title">Limiting Sets of Files<em>
(continued)</em><a class="anchor" aria-label="anchor" href="#limiting-sets-of-files"></a>
</h3>
<div class="callout-content">
<p>How would the output differ from using this command instead?</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>c<span class="pp">*</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>    ls <span class="va">$filename</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>The same files would be listed.</li>
<li>All the files are listed this time.</li>
<li>No files are listed this time.</li>
<li>The files <code>cubane.pdb</code> and <code>octane.pdb</code> will
be listed.</li>
<li>Only the file <code>octane.pdb</code> will be listed.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>4 is the correct answer. <code>*</code> matches zero or more
characters, so a file name with zero or more characters before a letter
c and zero or more characters after the letter c will be matched.</p>
</div>
</div>
</div>
</div>
<div id="saving-to-a-file-in-a-loop---part-one" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="saving-to-a-file-in-a-loop---part-one" class="callout-inner">
<h3 class="callout-title">Saving to a File in a Loop - Part One<a class="anchor" aria-label="anchor" href="#saving-to-a-file-in-a-loop---part-one"></a>
</h3>
<div class="callout-content">
<p>In the <code>data-shell/molecules</code> directory, what is the
effect of this loop?</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> alkanes <span class="kw">in</span> <span class="pp">*</span>.pdb</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$alkanes</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span> <span class="va">$alkanes</span> <span class="op">&gt;</span> alkanes.pdb</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>Prints <code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>methane.pdb</code>, <code>octane.pdb</code>,
<code>pentane.pdb</code> and <code>propane.pdb</code>, and the text from
<code>propane.pdb</code> will be saved to a file called
<code>alkanes.pdb</code>.</li>
<li>Prints <code>cubane.pdb</code>, <code>ethane.pdb</code>, and
<code>methane.pdb</code>, and the text from all three files would be
concatenated and saved to a file called <code>alkanes.pdb</code>.</li>
<li>Prints <code>cubane.pdb</code>, <code>ethane.pdb</code>,
<code>methane.pdb</code>, <code>octane.pdb</code>, and
<code>pentane.pdb</code>, and the text from <code>propane.pdb</code>
will be saved to a file called <code>alkanes.pdb</code>.</li>
<li>None of the above.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>The text from each file in turn gets written to the
<code>alkanes.pdb</code> file. However, the file gets overwritten on
each loop interation, so the final content of <code>alkanes.pdb</code>
is the text from the <code>propane.pdb</code> file.</li>
</ol>
</div>
</div>
</div>
</div>
<div id="saving-to-a-file-in-a-loop---part-two" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="saving-to-a-file-in-a-loop---part-two" class="callout-inner">
<h3 class="callout-title">Saving to a File in a Loop - Part Two<a class="anchor" aria-label="anchor" href="#saving-to-a-file-in-a-loop---part-two"></a>
</h3>
<div class="callout-content">
<p>Also in the <code>data-shell/molecules</code> directory, what would
be the output of the following loop?</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> <span class="pp">*</span>.pdb</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span> <span class="va">$datafile</span> <span class="op">&gt;&gt;</span> all.pdb</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<ol style="list-style-type: decimal">
<li>All of the text from <code>cubane.pdb</code>,
<code>ethane.pdb</code>, <code>methane.pdb</code>,
<code>octane.pdb</code>, and <code>pentane.pdb</code> would be
concatenated and saved to a file called <code>all.pdb</code>.</li>
<li>The text from <code>ethane.pdb</code> will be saved to a file called
<code>all.pdb</code>.</li>
<li>All of the text from <code>cubane.pdb</code>,
<code>ethane.pdb</code>, <code>methane.pdb</code>,
<code>octane.pdb</code>, <code>pentane.pdb</code> and
<code>propane.pdb</code> would be concatenated and saved to a file
called <code>all.pdb</code>.</li>
<li>All of the text from <code>cubane.pdb</code>,
<code>ethane.pdb</code>, <code>methane.pdb</code>,
<code>octane.pdb</code>, <code>pentane.pdb</code> and
<code>propane.pdb</code> would be printed to the screen and saved to a
file called <code>all.pdb</code>.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<p>3 is the correct answer. <code>&gt;&gt;</code> appends to a file,
rather than overwriting it with the redirected output from a command.
Given the output from the <code>cat</code> command has been redirected,
nothing is printed to the screen.</p>
</div>
</div>
</div>
</div>
<p>Let’s continue with our example in the
<code>data-shell/creatures</code> directory. Here’s a slightly more
complicated loop:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     echo <span class="va">$filename</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 100 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 20</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>The shell starts by expanding <code>*.dat</code> to create the list
of files it will process. The <strong>loop body</strong> then executes
two commands for each of those files. The first command,
<code>echo</code>, prints its command-line arguments to standard output.
For example:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> echo hello there</span></code></pre>
</div>
<p>prints:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>hello there</code></pre>
</div>
<p>In this case, since the shell expands <code>$filename</code> to be
the name of a file, <code>echo $filename</code> prints the name of the
file. Note that we can’t write this as:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     <span class="va">$filename</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     head <span class="ex">-n</span> 100 <span class="va">$filename</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 20</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>because then the first time through the loop, when
<code>$filename</code> expanded to <code>basilisk.dat</code>, the shell
would try to run <code>basilisk.dat</code> as a program. Finally, the
<code>head</code> and <code>tail</code> combination selects lines 81-100
from whatever file is being processed (assuming the file has at least
100 lines).</p>
<div id="spaces-in-names" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="spaces-in-names" class="callout-inner">
<h3 class="callout-title">Spaces in Names<a class="anchor" aria-label="anchor" href="#spaces-in-names"></a>
</h3>
<div class="callout-content">
<p>Spaces are used to separate the elements of the list that we are
going to loop over. If one of those elements contains a space character,
we need to surround it with quotes, and do the same thing to our loop
variable. Suppose our data files are named:</p>
<pre class="source"><code>red dragon.dat
purple unicorn.dat</code></pre>
<p>To loop over these files, we would need to add double quotes like
so:</p>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> <span class="st">"red dragon.dat"</span> <span class="st">"purple unicorn.dat"</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>     <span class="fu">head</span> <span class="at">-n</span> 100 <span class="st">"</span><span class="va">$filename</span><span class="st">"</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 20</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>It is simpler to avoid using spaces (or other special characters) in
filenames.</p>
<p>The files above don’t exist, so if we run the above code, the
<code>head</code> command will be unable to find them, however the error
message returned will show the name of the files it is expecting:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>head: cannot open ‘red dragon.dat' for reading: No such file or directory
head: cannot open ‘purple unicorn.dat' for reading: No such file or directory</code></pre>
</div>
<p>Try removing the quotes around <code>$filename</code> in the loop
above to see the effect of the quote marks on spaces. Note that we get a
result from the loop command for unicorn.dat when we run this code in
the <code>creatures</code> directory:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>head: cannot open ‘red' for reading: No such file or directory
head: cannot open ‘dragon.dat' for reading: No such file or directory
head: cannot open ‘purple' for reading: No such file or directory
CGGTACCGAA
AAGGGTCGCG
CAAGTGTTCC</code></pre>
</div>
</div>
</div>
</div>
<p>We would like to copy each of the files in
<code>data-shell/creatures</code>, naming the copies with prefix
<code>original-</code>, i.e., <code>original-basilisk.dat</code> and
<code>original-unicorn.dat</code>. We can’t use:</p>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp <span class="pp">*</span>.dat original-<span class="pp">*</span>.dat</span></code></pre>
</div>
<p>because that would expand to:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cp basilisk.dat minotaur.dat unicorn.dat original-<span class="pp">*</span>.dat</span></code></pre>
</div>
<p>This wouldn’t back up our files, instead we get an error:</p>
<div class="codewrapper">
<h3 class="code-label">ERROR<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="error" tabindex="0"><code>cp: target `original-*.dat' is not a directory</code></pre>
</div>
<p>This problem arises when <code>cp</code> receives more than two
inputs. When this happens, it expects the last input to be a directory
where it can copy all the files it was passed. Since there is no
directory named <code>original-*.dat</code> in the
<code>creatures</code> directory we get an error.</p>
<p>Instead, we can use a loop:</p>
<div class="codewrapper sourceCode" id="cb30">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for filename in <span class="pp">*</span>.dat</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     cp <span class="va">$filename</span> original-<span class="va">$filename</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>This loop runs the <code>cp</code> command once for each filename.
The first time, when <code>$filename</code> expands to
<code>basilisk.dat</code>, the shell executes:</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> basilisk.dat original-basilisk.dat</span></code></pre>
</div>
<p>The second time, the command is:</p>
<div class="codewrapper sourceCode" id="cb32">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> minotaur.dat original-minotaur.dat</span></code></pre>
</div>
<p>The third and last time, the command is:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> unicorn.dat original-unicorn.dat</span></code></pre>
</div>
<p>Since the <code>cp</code> command does not normally produce any
output, it’s hard to check that the loop is doing the correct thing.
However, we learned earlier how to print strings using
<code>echo</code>, and we can modify the loop to use <code>echo</code>
to print our commands without actually executing them. As such we can
check what commands <em>would be</em> run in the unmodified loop.</p>
<p>The following diagram shows what happens when the modified loop is
executed, and demonstrates how the judicious use of <code>echo</code> is
a good debugging technique.</p>
<figure><img src="../fig/shell_script_for_loop_flow_chart.svg" alt="For Loop in Action" class="figure mx-auto d-block"></figure><section id="nelles-pipeline-processing-files"><h2 class="section-heading">Nelle’s Pipeline: Processing Files<a class="anchor" aria-label="anchor" href="#nelles-pipeline-processing-files"></a>
</h2>
<hr class="half-width">
<p>Nelle is now ready to process her data files using
<code>goostats</code> — a shell script written by her supervisor. This
calculates some statistics from a protein sample file, and takes two
arguments: Nelle’s supervisor insisted that all her analytics must be
reproducible. The easiest way to capture all the steps is in a
script.</p>
<ol style="list-style-type: decimal">
<li>an input file (containing the raw data)</li>
<li>an output file (to store the calculated statistics)</li>
</ol>
<p>Since she’s still learning how to use the shell, she decides to build
up the required commands in stages. Her first step is to make sure that
she can select the right input files — remember, these are ones whose
names end in ‘A’ or ‘B’, rather than ‘Z’. Starting from her home
directory, Nelle types:</p>
<div class="codewrapper sourceCode" id="cb34">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd north-pacific-gyre/2012-07-03</span></code></pre>
</div>
<p>Let’s create a new script file <code>do-stats.sh</code>:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># filename: do-stats.sh</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate stats for Site A and Site B data files.</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> NENE<span class="pp">*</span>[AB].txt</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>     <span class="bu">echo</span> <span class="va">$datafile</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">NENE01729A.txt</span></span>
<span><span class="va">NENE01729B.txt</span></span>
<span><span class="va">NENE01736A.txt</span></span>
<span><span class="va">...</span></span>
<span><span class="va">NENE02043A.txt</span></span>
<span><span class="va">NENE02043B.txt</span></span></code></pre>
</div>
<p>Her next step is to decide what to call the files that the
<code>goostats</code> analysis program will create. Prefixing each input
file’s name with ‘stats’ seems simple, so she modifies her loop to do
that:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co"># filename: do-stats.sh</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate stats for Site A and Site B data files.</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> NENE<span class="pp">*</span>[AB].txt</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>     <span class="bu">echo</span> <span class="va">$datafile</span> stats-<span class="va">$datafile</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>NENE01729A.txt stats-NENE01729A.txt
NENE01729B.txt stats-NENE01729B.txt
NENE01736A.txt stats-NENE01736A.txt
...
NENE02043A.txt stats-NENE02043A.txt
NENE02043B.txt stats-NENE02043B.txt</code></pre>
</div>
<p>She hasn’t actually run <code>goostats</code> yet, but now she’s sure
she can select the right files and generate the right output
filenames.</p>
<!--
Typing in commands over and over again is becoming tedious,
though,
and Nelle is worried about making mistakes,
so instead of re-entering her loop,
she presses the up arrow.
In response,
the shell redisplays the whole loop on one line
(using semi-colons to separate the pieces):

~~~
$ for datafile in NENE*[AB].txt; do echo $datafile stats-$datafile; done
~~~
{: .language-bash}

Using the left arrow key,
Nelle backs up and changes the command `echo` to `bash goostats`:

~~~
$ for datafile in NENE*[AB].txt; do bash goostats $datafile stats-$datafile; done
~~~
{: .language-bash}

When she presses <kbd>Enter</kbd>,
the shell runs the modified command.
However, nothing appears to happen --- there is no output.
After a moment, Nelle realizes that since her script doesn't print anything to the screen any longer,
she has no idea whether it is running, much less how quickly.
She kills the running command by typing `Ctrl-C`,
uses up-arrow to repeat the command,
and edits it to read:

~~~
$ for datafile in NENE*[AB].txt; do echo $datafile; bash goostats $datafile stats-$datafile; done
~~~
{: .language-bash}

> ## Beginning and End
>
> We can move to the beginning of a line in the shell by typing `Ctrl-a`
> and to the end using `Ctrl-e`.
{: .callout}
-->
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># filename: do-stats.sh</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate stats for Site A and Site B data files.</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> NENE<span class="pp">*</span>[AB].txt</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>     <span class="bu">echo</span> <span class="st">"Processing </span><span class="va">$datafile</span><span class="st">..."</span> <span class="co"># add a message for user</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>     <span class="ex">./goostats</span> <span class="va">$datafile</span> stats-<span class="va">$datafile</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>When she runs her program now, it produces one line of output every
five seconds or so:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">NENE01729A.txt</span></span>
<span><span class="va">NENE01729B.txt</span></span>
<span><span class="va">NENE01736A.txt</span></span>
<span><span class="va">...</span></span></code></pre>
</div>
<p>1518 times 5 seconds, divided by 60, tells her that her script will
take about two hours to run. As a final check, she opens another
terminal window, goes into <code>north-pacific-gyre/2012-07-03</code>,
and uses <code>cat stats-NENE01729B.txt</code> to examine one of the
output files. It looks good, so she decides to get some coffee and catch
up on her reading.</p>
<p>The above script can be easily modified to all the filles in a
directory:</p>
<div class="codewrapper sourceCode" id="cb41">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co"># filename: do-stats.sh</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate stats for data files.</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> <span class="st">"</span><span class="va">$@</span><span class="st">"</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$datafile</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bash</span> goostats <span class="va">$datafile</span> stats-<span class="va">$datafile</span></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>The advantage is that this always selects the right files: she
doesn’t have to remember to exclude the ‘Z’ files. The disadvantage is
that it always selects just those files — she can’t run it on all files
(including the ‘Z’ files), or on the ‘G’ or ‘H’ files her colleagues in
Antarctica are producing, without editing the script. If she wanted to
be more adventurous, she could modify her script to check for
command-line arguments, and use NENE*[AB].txt if none were provided. Of
course, this introduces another tradeoff between flexibility and
complexity.</p>
<div id="doing-a-dry-run" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="doing-a-dry-run" class="callout-inner">
<h3 class="callout-title">Doing a Dry Run<a class="anchor" aria-label="anchor" href="#doing-a-dry-run"></a>
</h3>
<div class="callout-content">
<p>A loop is a way to do many things at once — or to make many mistakes
at once if it does the wrong thing. One way to check what a loop
<em>would</em> do is to <code>echo</code> the commands it would run
instead of actually running them.</p>
<p>Suppose we want to preview the commands the following loop will
execute without actually running those commands:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for file in <span class="pp">*</span>.pdb</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>   analyze <span class="va">$file</span> <span class="op">&gt;</span> analyzed-<span class="va">$file</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<p>What is the difference between the two loops below, and which one
would we want to run?</p>
<div class="codewrapper sourceCode" id="cb43">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Version 1</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for file in <span class="pp">*</span>.pdb</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>   echo <span class="ex">analyze</span> <span class="va">$file</span> <span class="op">&gt;</span> analyzed-<span class="va">$file</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Version 2</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for file in <span class="pp">*</span>.pdb</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>   echo <span class="st">"analyze </span><span class="va">$file</span><span class="st"> &gt; analyzed-</span><span class="va">$file</span><span class="st">"</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<p>The second version is the one we want to run. This prints to screen
everything enclosed in the quote marks, expanding the loop variable name
because we have prefixed it with a dollar sign.</p>
<p>The first version redirects the output from the command
<code>echo analyze $file</code> to a file, <code>analyzed-$file</code>.
A series of files is generated: <code>analyzed-cubane.pdb</code>,
<code>analyzed-ethane.pdb</code> etc.</p>
<p>Try both versions for yourself to see the output! Be sure to open the
<code>analyzed-*.pdb</code> files to view their contents.</p>
</div>
</div>
</div>
</div>
<div id="script-reading-comprehension" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="script-reading-comprehension" class="callout-inner">
<h3 class="callout-title">Script Reading Comprehension<a class="anchor" aria-label="anchor" href="#script-reading-comprehension"></a>
</h3>
<div class="callout-content">
<p>For this question, consider the <code>data-shell/molecules</code>
directory once again. This contains a number of <code>.pdb</code> files
in addition to any other files you may have created. Explain what each
of the following three scripts would do when run as
<code>bash script1.sh *.pdb</code>, <code>bash script2.sh *.pdb</code>,
and <code>bash script3.sh *.pdb</code> respectively.</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Script 1</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="pp">*</span>.<span class="pp">*</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb46">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Script 2</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> filename <span class="kw">in</span> <span class="va">$1</span> <span class="va">$2</span> <span class="va">$3</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span> <span class="va">$filename</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Script 3</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="va">$@</span>.pdb</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution7" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution7" aria-expanded="false" aria-controls="collapseSolution7">
  <h4 class="accordion-header" id="headingSolution7">
  Solutions
  </h4>
</button>
<div id="collapseSolution7" class="accordion-collapse collapse" data-bs-parent="#accordionSolution7" aria-labelledby="headingSolution7">
<div class="accordion-body">
<p>In each case, the shell expands the wildcard in <code>*.pdb</code>
before passing the resulting list of file names as arguments to the
script.</p>
<p>Script 1 would print out a list of all files containing a dot in
their name. The arguments passed to the script are not actually used
anywhere in the script.</p>
<p>Script 2 would print the contents of the first 3 files with a
<code>.pdb</code> file extension. <code>$1</code>, <code>$2</code>, and
<code>$3</code> refer to the first, second, and third argument
respectively.</p>
<p>Script 3 would print all the arguments to the script (i.e. all the
<code>.pdb</code> files), followed by <code>.pdb</code>. <code>$@</code>
refers to <em>all</em> the arguments given to a shell script.</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>cubane.pdb ethane.pdb methane.pdb octane.pdb pentane.pdb propane.pdb.pdb</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="debugging-scripts" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="debugging-scripts" class="callout-inner">
<h3 class="callout-title">Debugging Scripts<a class="anchor" aria-label="anchor" href="#debugging-scripts"></a>
</h3>
<div class="callout-content">
<p>Suppose you have saved the following script in a file called
<code>do-errors.sh</code> in Nelle’s
<code>north-pacific-gyre/2012-07-03</code> directory:</p>
<div class="codewrapper sourceCode" id="cb49">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate stats for data files.</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> datafile <span class="kw">in</span> <span class="st">"</span><span class="va">$@</span><span class="st">"</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="va">$datfile</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bash</span> goostats <span class="va">$datafile</span> stats-<span class="va">$datafile</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span></code></pre>
</div>
<p>When you run it:</p>
<div class="codewrapper sourceCode" id="cb50">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> bash do-errors.sh NENE<span class="pp">*</span>[AB].txt</span></code></pre>
</div>
<p>the output is blank. To figure out why, re-run the script using the
<code>-x</code> option:</p>
<div class="codewrapper sourceCode" id="cb51">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bash</span> <span class="at">-x</span> do-errors.sh NENE<span class="pp">*</span>[AB].txt</span></code></pre>
</div>
<p>What is the output showing you? Which line is responsible for the
error?</p>
</div>
</div>
</div>
<div id="accordionSolution8" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution8" aria-expanded="false" aria-controls="collapseSolution8">
  <h4 class="accordion-header" id="headingSolution8">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution8" class="accordion-collapse collapse" data-bs-parent="#accordionSolution8" aria-labelledby="headingSolution8">
<div class="accordion-body">
<p>The <code>-x</code> option causes <code>bash</code> to run in debug
mode. This prints out each command as it is run, which will help you to
locate errors. In this example, we can see that <code>echo</code> isn’t
printing anything. We have made a typo in the loop variable name, and
the variable <code>datfile</code> doesn’t exist, hence returning an
empty string.</p>
</div>
</div>
</div>
</div>
<div id="nested-loops" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="nested-loops" class="callout-inner">
<h3 class="callout-title">Nested Loops<a class="anchor" aria-label="anchor" href="#nested-loops"></a>
</h3>
<div class="callout-content">
<p>Suppose we want to set up up a directory structure to organize some
experiments measuring reaction rate constants with different compounds
<em>and</em> different temperatures. What would be the result of the
following code:</p>
<div class="codewrapper sourceCode" id="cb52">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> for species in cubane ethane methane</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> do</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     for <span class="ex">temperature</span> in 25 30 37 40</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     do</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>         mkdir <span class="va">$species</span><span class="ex">-</span><span class="va">$temperature</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span>     done</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> done</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution9" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution9" aria-expanded="false" aria-controls="collapseSolution9">
  <h4 class="accordion-header" id="headingSolution9">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution9" class="accordion-collapse collapse" data-bs-parent="#accordionSolution9" aria-labelledby="headingSolution9">
<div class="accordion-body">
<p>We have a nested loop, i.e. contained within another loop, so for
each species in the outer loop, the inner loop (the nested loop)
iterates over the list of temperatures, and creates a new directory for
each combination.</p>
<p>Try running the code for yourself to see which directories are
created!</p>
</div>
</div>
</div>
</div>
<div id="those-who-know-history-can-choose-to-repeat-it" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="those-who-know-history-can-choose-to-repeat-it" class="callout-inner">
<h3 class="callout-title">Those Who Know History Can Choose to Repeat
It<a class="anchor" aria-label="anchor" href="#those-who-know-history-can-choose-to-repeat-it"></a>
</h3>
<div class="callout-content">
<p>Another way to repeat previous work is to use the
<code>history</code> command to get a list of the last few hundred
commands that have been executed, and then to use <code>!123</code>
(where ‘123’ is replaced by the command number) to repeat one of those
commands. For example, if Nelle types this:</p>
<div class="codewrapper sourceCode" id="cb53">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> history <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n</span> 5</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>  456  ls -l NENE0*.txt
  457  rm stats-NENE01729B.txt.txt
  458  bash goostats NENE01729B.txt stats-NENE01729B.txt
  459  ls -l NENE0*.txt
  460  history</code></pre>
</div>
<p>then she can re-run <code>goostats</code> on
<code>NENE01729B.txt</code> simply by typing <code>!458</code>.</p>
</div>
</div>
</div>
<div id="other-history-commands" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="other-history-commands" class="callout-inner">
<h3 class="callout-title">Other History Commands<a class="anchor" aria-label="anchor" href="#other-history-commands"></a>
</h3>
<div class="callout-content">
<p>There are a number of other shortcut commands for getting at the
history.</p>
<ul>
<li>
<code>Ctrl-R</code> enters a history search mode ‘reverse-i-search’
and finds the most recent command in your history that matches the text
you enter next. Press <code>Ctrl-R</code> one or more additional times
to search for earlier matches.</li>
<li>
<code>!!</code> retrieves the immediately preceding command (you may
or may not find this more convenient than using the up-arrow)</li>
<li>
<code>!$</code> retrieves the last word of the last command. That’s
useful more often than you might expect: after
<code>bash goostats NENE01729B.txt stats-NENE01729B.txt</code>, you can
type <code>less !$</code> to look at the file
<code>stats-NENE01729B.txt</code>, which is quicker than doing up-arrow
and editing the command-line.</li>
</ul>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>A <code>for</code> loop repeats commands once for every thing in a
list.</li>
<li>Every <code>for</code> loop needs a variable to refer to the thing
it is currently operating on.</li>
<li>Use <code>$name</code> to expand a variable (i.e., get its value).
<code>${name}</code> can also be used.</li>
<li>Do not use spaces, quotes, or wildcard characters such as ‘*’ or ‘?’
in filenames, as it complicates variable expansion.</li>
<li>Give files consistent names that are easy to match with wildcard
patterns to make it easy to select them for looping.</li>
<li>Use the up-arrow key to scroll up through previous commands to edit
and repeat them.</li>
<li>Use <code>Ctrl-R</code> to search through the previously entered
commands.</li>
<li>Use <code>history</code> to display recent commands, and
<code>!number</code> to repeat a command by number.</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-07-find"><p>Content from <a href="07-find.html">Finding Things</a></p>
<hr>
<p> Last updated on 2023-11-21 | 
        
        <a href="https://github.com/zkamvar/mdf-shell-novice/edit/main/episodes/07-find.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time <i aria-hidden="true" data-feather="clock"></i> 45 minutes </p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right"> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I find files?</li>
<li>How can I find things in files?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Use <code>grep</code> to select lines from text files that match
simple patterns.</li>
<li>Use <code>find</code> to find files and directories whose names
match simple patterns.</li>
<li>Use the output of one command as the command-line argument(s) to
another command.</li>
<li>Explain what is meant by ‘text’ and ‘binary’ files, and why many
common tools don’t handle the latter well.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>In the same way that many of us now use ‘Google’ as a verb meaning
‘to find’, Unix programmers often use the word ‘grep’. ‘grep’ is a
contraction of ‘global/regular expression/print’, a common sequence of
operations in early Unix text editors. It is also the name of a very
useful command-line program.</p>
<p><code>grep</code> finds and prints lines in files that match a
pattern. For our examples, we will use a file that contains three haikus
taken from a 1998 competition in <em>Salon</em> magazine. For this set
of examples, we’re going to be working in the writing subdirectory:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cd Desktop/data-shell/writing</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> cat haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The Tao that is seen
Is not the true Tao, until
You bring fresh toner.

With searching comes loss
and the presence of absence:
"My Thesis" not found.

Yesterday it worked
Today it is not working
Software is like that.</code></pre>
</div>
<div id="forever-or-five-years" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="forever-or-five-years" class="callout-inner">
<h3 class="callout-title">Forever, or Five Years<a class="anchor" aria-label="anchor" href="#forever-or-five-years"></a>
</h3>
<div class="callout-content">
<p>We haven’t linked to the original haikus because they don’t appear to
be on <em>Salon</em>’s site any longer. As <a href="https://www.clir.org/wp-content/uploads/sites/6/ensuring.pdf" class="external-link">Jeff
Rothenberg said</a>, ‘Digital information lasts forever — or five years,
whichever comes first.’ Luckily, popular content often <a href="https://wiki.c2.com/?ComputerErrorHaiku" class="external-link">has backups</a>.</p>
</div>
</div>
</div>
<p>Let’s find lines that contain the word ‘not’:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep not haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Is not the true Tao, until
"My Thesis" not found
Today it is not working</code></pre>
</div>
<p>Here, <code>not</code> is the pattern we’re searching for. The grep
command searches through the file, looking for matches to the pattern
specified. To use it type <code>grep</code>, then the pattern we’re
searching for and finally the name of the file (or files) we’re
searching in.</p>
<p>The output is the three lines in the file that contain the letters
‘not’.</p>
<p>By default, grep searches for a pattern in a case-sensitive way. In
addition, the search pattern we have selected does not have to form a
complete word, as we will see in the next example.</p>
<p>Let’s search for the pattern: ‘The’.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep The haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The Tao that is seen
"My Thesis" not found.</code></pre>
</div>
<p>This time, two lines that include the letters ‘The’ are outputted,
one of which contained our search pattern within a larger word,
‘Thesis’.</p>
<p>To restrict matches to lines containing the word ‘The’ on its own, we
can give <code>grep</code> with the <code>-w</code> option. This will
limit matches to word boundaries.</p>
<p>Later in this lesson, we will also see how we can change the search
behavior of grep with respect to its case sensitivity.</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-w</span> The haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>The Tao that is seen</code></pre>
</div>
<p>Note that a ‘word boundary’ includes the start and end of a line, so
not just letters surrounded by spaces. Sometimes we don’t want to search
for a single word, but a phrase. This is also easy to do with
<code>grep</code> by putting the phrase in quotes.</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-w</span> <span class="st">"is not"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Today it is not working</code></pre>
</div>
<p>We’ve now seen that you don’t have to have quotes around single
words, but it is useful to use quotes when searching for multiple words.
It also helps to make it easier to distinguish between the search term
or phrase and the file being searched. We will use quotes in the
remaining examples.</p>
<p>Another useful option is <code>-n</code>, which numbers the lines
that match:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-n</span> <span class="st">"it"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>5:With searching comes loss
9:Yesterday it worked
10:Today it is not working</code></pre>
</div>
<p>Here, we can see that lines 5, 9, and 10 contain the letters
‘it’.</p>
<p>We can combine options (i.e. flags) as we do with other Unix
commands. For example, let’s find the lines that contain the word ‘the’.
We can combine the option <code>-w</code> to find the lines that contain
the word ‘the’ and <code>-n</code> to number the lines that match:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-n</span> <span class="at">-w</span> <span class="st">"the"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>2:Is not the true Tao, until
6:and the presence of absence:</code></pre>
</div>
<p>Now we want to use the option <code>-i</code> to make our search
case-insensitive:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-n</span> <span class="at">-w</span> <span class="at">-i</span> <span class="st">"the"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1:The Tao that is seen
2:Is not the true Tao, until
6:and the presence of absence:</code></pre>
</div>
<p>Now, we want to use the option <code>-v</code> to invert our search,
i.e., we want to output the lines that do not contain the word
‘the’.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-n</span> <span class="at">-w</span> <span class="at">-v</span> <span class="st">"the"</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1:The Tao that is seen
3:You bring fresh toner.
4:
5:With searching comes loss
7:"My Thesis" not found.
8:
9:Yesterday it worked
10:Today it is not working
11:Software is like that.</code></pre>
</div>
<p><code>grep</code> has lots of other options. To find out what they
are, we can type:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">--help</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Usage: grep [OPTION]... PATTERN [FILE]...
Search for PATTERN in each FILE or standard input.
PATTERN is, by default, a basic regular expression (BRE).
Example: grep -i 'hello world' menu.h main.c

Regexp selection and interpretation:
  -E, --extended-regexp     PATTERN is an extended regular expression (ERE)
  -F, --fixed-strings       PATTERN is a set of newline-separated fixed strings
  -G, --basic-regexp        PATTERN is a basic regular expression (BRE)
  -P, --perl-regexp         PATTERN is a Perl regular expression
  -e, --regexp=PATTERN      use PATTERN for matching
  -f, --file=FILE           obtain PATTERN from FILE
  -i, --ignore-case         ignore case distinctions
  -w, --word-regexp         force PATTERN to match only whole words
  -x, --line-regexp         force PATTERN to match only whole lines
  -z, --null-data           a data line ends in 0 byte, not newline

Miscellaneous:
...        ...        ...</code></pre>
</div>
<div id="using-grep" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="using-grep" class="callout-inner">
<h3 class="callout-title">Using <code>grep</code><a class="anchor" aria-label="anchor" href="#using-grep"></a>
</h3>
<div class="callout-content">
<p>Which command would result in the following output:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>and the presence of absence:</code></pre>
</div>
<ol style="list-style-type: decimal">
<li><code>grep "of" haiku.txt</code></li>
<li><code>grep -E "of" haiku.txt</code></li>
<li><code>grep -w "of" haiku.txt</code></li>
<li><code>grep -i "of" haiku.txt</code></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The correct answer is 3, because the <code>-w</code> option looks
only for whole-word matches. The other options will also match ‘of’ when
part of another word.</p>
</div>
</div>
</div>
</div>
<div id="wildcards" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="wildcards" class="callout-inner">
<h3 class="callout-title">Wildcards<a class="anchor" aria-label="anchor" href="#wildcards"></a>
</h3>
<div class="callout-content">
<p><code>grep</code>‘s real power doesn’t come from its options, though;
it comes from the fact that patterns can include wildcards. (The
technical name for these is <strong>regular expressions</strong>, which
is what the ’re’ in ‘grep’ stands for.) Regular expressions are both
complex and powerful; if you want to do complex searches, please look at
the lesson on <a href="https://v4.software-carpentry.org/regexp/index.html" class="external-link">our
website</a>. As a taster, we can find lines that have an ‘o’ in the
second position like this:</p>
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="at">-E</span> <span class="st">'^.o'</span> haiku.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>You bring fresh toner.
Today it is not working
Software is like that.</code></pre>
</div>
<p>We use the <code>-E</code> option and put the pattern in quotes to
prevent the shell from trying to interpret it. (If the pattern contained
a <code>*</code>, for example, the shell would try to expand it before
running <code>grep</code>.) The <code>^</code> in the pattern anchors
the match to the start of the line. The <code>.</code> matches a single
character (just like <code>?</code> in the shell), while the
<code>o</code> matches an actual ‘o’.</p>
</div>
</div>
</div>
<div id="tracking-a-species" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="tracking-a-species" class="callout-inner">
<h3 class="callout-title">Tracking a Species<a class="anchor" aria-label="anchor" href="#tracking-a-species"></a>
</h3>
<div class="callout-content">
<p>Leah has several hundred data files saved in one directory, each of
which is formatted like this:</p>
<pre class="source"><code>2013-11-05,deer,5
2013-11-05,rabbit,22
2013-11-05,raccoon,7
2013-11-06,rabbit,19
2013-11-06,deer,2</code></pre>
<p>She wants to write a shell script that takes a species as the first
command-line argument and a directory as the second argument. The script
should return one file called <code>species.txt</code> containing a list
of dates and the number of that species seen on each date. For example
using the data shown above, <code>rabbit.txt</code> would contain:</p>
<pre class="source"><code>2013-11-05,22
2013-11-06,19</code></pre>
<p>Put these commands and pipes in the right order to achieve this:</p>
<div class="codewrapper sourceCode" id="cb26">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span> <span class="at">-d</span> : <span class="at">-f</span> 2</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-w</span> <span class="va">$1</span> <span class="at">-r</span> <span class="va">$2</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="kw">|</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="va">$1</span><span class="ex">.txt</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="fu">cut</span> <span class="at">-d</span> , <span class="at">-f</span> 1,3</span></code></pre>
</div>
<p>Hint: use <code>man grep</code> to look for how to grep text
recursively in a directory and <code>man cut</code> to select more than
one field in a line.</p>
<p>An example of such a file is provided in
<code>data-shell/data/animal-counts/animals.txt</code></p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<pre class="source"><code>grep -w $1 -r $2 | cut -d : -f 2 | cut -d , -f 1,3  &gt; $1.txt</code></pre>
<p>You would call the script above like this:</p>
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> bash count-species.sh bear .</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="little-women" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="little-women" class="callout-inner">
<h3 class="callout-title">Little Women<a class="anchor" aria-label="anchor" href="#little-women"></a>
</h3>
<div class="callout-content">
<p>You and your friend, having just finished reading <em>Little
Women</em> by Louisa May Alcott, are in an argument. Of the four sisters
in the book, Jo, Meg, Beth, and Amy, your friend thinks that Jo was the
most mentioned. You, however, are certain it was Amy. Luckily, you have
a file <code>LittleWomen.txt</code> containing the full text of the
novel (<code>data-shell/writing/data/LittleWomen.txt</code>). Using a
<code>for</code> loop, how would you tabulate the number of times each
of the four sisters is mentioned?</p>
<p>Hint: one solution might employ the commands <code>grep</code> and
<code>wc</code> and a <code>|</code>, while another might utilize
<code>grep</code> options. There is often more than one way to solve a
programming task, so a particular solution is usually chosen based on a
combination of yielding the correct result, elegance, readability, and
speed.</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">
  Solutions
  </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<pre class="source"><code>for sis in Jo Meg Beth Amy
do
	echo $sis:
grep -ow $sis LittleWomen.txt | wc -l
done</code></pre>
<p>Alternative, slightly inferior solution:</p>
<pre class="source"><code>for sis in Jo Meg Beth Amy
do
	echo $sis:
grep -ocw $sis LittleWomen.txt
done</code></pre>
<p>This solution is inferior because <code>grep -c</code> only reports
the number of lines matched. The total number of matches reported by
this method will be lower if there is more than one match per line.</p>
<p>Perceptive observers may have noticed that character names sometimes
appear in all-uppercase in chapter titles (e.g. ‘MEG GOES TO VANITY
FAIR’). If you wanted to count these as well, you could add the
<code>-i</code> option for case-insensitivity (though in this case, it
doesn’t affect the answer to which sister is mentioned most
frequently).</p>
</div>
</div>
</div>
</div>
<p>While <code>grep</code> finds lines in files, the <code>find</code>
command finds files themselves. Again, it has a lot of options; to show
how the simplest ones work, we’ll use the directory tree shown
below.</p>
<figure><img src="../fig/find-file-tree.svg" alt="File Tree for Find Example" class="figure mx-auto d-block"></figure><p>Nelle’s <code>writing</code> directory contains one file called
<code>haiku.txt</code> and three subdirectories: <code>thesis</code>
(which contains a sadly empty file, <code>empty-draft.md</code>);
<code>data</code> (which contains three files
<code>LittleWomen.txt</code>, <code>one.txt</code> and
<code>two.txt</code>); and a <code>tools</code> directory that contains
the programs <code>format</code> and <code>stats</code>, and a
subdirectory called <code>old</code>, with a file
<code>oldtool</code>.</p>
<p>For our first command, let’s run <code>find .</code> (remember to run
this command from the <code>data-shell/writing</code> folder).</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> find .</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">data</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">data</span><span class="op">/</span><span class="va">one.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">data</span><span class="op">/</span><span class="va">LittleWomen.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">data</span><span class="op">/</span><span class="va">two.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">tools</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">tools</span><span class="op">/</span><span class="va">format</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">tools</span><span class="op">/</span><span class="va">old</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">tools</span><span class="op">/</span><span class="va">old</span><span class="op">/</span><span class="va">oldtool</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">tools</span><span class="op">/</span><span class="va">stats</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">haiku.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">thesis</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">thesis</span><span class="op">/</span><span class="va">empty</span><span class="op">-</span><span class="va">draft.md</span></span></code></pre>
</div>
<p>As always, the <code>.</code> on its own means the current working
directory, which is where we want our search to start.
<code>find</code>’s output is the names of every file
<strong>and</strong> directory under the current working directory. This
can seem useless at first but <code>find</code> has many options to
filter the output and in this lesson we will discover some of them.</p>
<p>The first option in our list is <code>-type d</code> that means
‘things that are directories’. Sure enough, <code>find</code>’s output
is the names of the five directories in our little tree (including
<code>.</code>):</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-type</span> d</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span><span class="op">/</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">data</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">thesis</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">tools</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">tools</span><span class="op">/</span><span class="va">old</span></span></code></pre>
</div>
<p>Notice that the objects <code>find</code> finds are not listed in any
particular order. If we change <code>-type d</code> to
<code>-type f</code>, we get a listing of all the files instead:</p>
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-type</span> f</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span><span class="op">/</span><span class="va">haiku.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">tools</span><span class="op">/</span><span class="va">stats</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">tools</span><span class="op">/</span><span class="va">old</span><span class="op">/</span><span class="va">oldtool</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">tools</span><span class="op">/</span><span class="va">format</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">thesis</span><span class="op">/</span><span class="va">empty</span><span class="op">-</span><span class="va">draft.md</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">data</span><span class="op">/</span><span class="va">one.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">data</span><span class="op">/</span><span class="va">LittleWomen.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">data</span><span class="op">/</span><span class="va">two.txt</span></span></code></pre>
</div>
<p>Now let’s try matching by name:</p>
<div class="codewrapper sourceCode" id="cb37">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-name</span> <span class="pp">*</span>.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span><span class="op">/</span><span class="va">haiku.txt</span></span></code></pre>
</div>
<p>We expected it to find all the text files, but it only prints out
<code>./haiku.txt</code>. The problem is that the shell expands wildcard
characters like <code>*</code> <em>before</em> commands run. Since
<code>*.txt</code> in the current directory expands to
<code>haiku.txt</code>, the command we actually ran was:</p>
<div class="codewrapper sourceCode" id="cb39">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-name</span> haiku.txt</span></code></pre>
</div>
<p><code>find</code> did what we asked; we just asked for the wrong
thing.</p>
<p>To get what we want, let’s do what we did with <code>grep</code>: put
<code>*.txt</code> in single quotes to prevent the shell from expanding
the <code>*</code> wildcard. This way, <code>find</code> actually gets
the pattern <code>*.txt</code>, not the expanded filename
<code>haiku.txt</code>:</p>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> find . <span class="at">-name</span> <span class="st">'*.txt'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">.</span><span class="op">/</span><span class="va">data</span><span class="op">/</span><span class="va">one.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">data</span><span class="op">/</span><span class="va">LittleWomen.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">data</span><span class="op">/</span><span class="va">two.txt</span></span>
<span><span class="va">.</span><span class="op">/</span><span class="va">haiku.txt</span></span></code></pre>
</div>
<div id="listing-vs.-finding" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="listing-vs.-finding" class="callout-inner">
<h3 class="callout-title">Listing vs. Finding<a class="anchor" aria-label="anchor" href="#listing-vs.-finding"></a>
</h3>
<div class="callout-content">
<p><code>ls</code> and <code>find</code> can be made to do similar
things given the right options, but under normal circumstances,
<code>ls</code> lists everything it can, while <code>find</code>
searches for things with certain properties and shows them.</p>
</div>
</div>
</div>
<p>As we said earlier, the command line’s power lies in combining tools.
We’ve seen how to do that with pipes; let’s look at another technique.
As we just saw, <code>find . -name '*.txt'</code> gives us a list of all
text files in or below the current directory. How can we combine that
with <code>wc -l</code> to count the lines in all those files?</p>
<p>The simplest way is to put the <code>find</code> command inside
<code>$()</code>:</p>
<div class="codewrapper sourceCode" id="cb42">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> <span class="va">$(</span><span class="fu">find</span> . <span class="at">-name</span> <span class="st">'*.txt'</span><span class="va">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>11 ./haiku.txt
300 ./data/two.txt
21022 ./data/LittleWomen.txt
70 ./data/one.txt
21403 total</code></pre>
</div>
<p>When the shell executes this command, the first thing it does is run
whatever is inside the <code>$()</code>. It then replaces the
<code>$()</code> expression with that command’s output. Since the output
of <code>find</code> is the four filenames <code>./data/one.txt</code>,
<code>./data/LittleWomen.txt</code>, <code>./data/two.txt</code>, and
<code>./haiku.txt</code>, the shell constructs the command:</p>
<div class="codewrapper sourceCode" id="cb44">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> wc <span class="at">-l</span> ./data/one.txt ./data/LittleWomen.txt ./data/two.txt ./haiku.txt</span></code></pre>
</div>
<p>which is what we wanted. This expansion is exactly what the shell
does when it expands wildcards like <code>*</code> and <code>?</code>,
but lets us use any command we want as our own ‘wildcard’.</p>
<p>It’s very common to use <code>find</code> and <code>grep</code>
together. The first finds files that match a pattern; the second looks
for lines inside those files that match another pattern. Here, for
example, we can find PDB files that contain iron atoms by looking for
the string ‘FE’ in all the <code>.pdb</code> files above the current
directory:</p>
<div class="codewrapper sourceCode" id="cb45">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> grep <span class="st">"FE"</span> <span class="va">$(</span><span class="fu">find</span> .. <span class="at">-name</span> <span class="st">'*.pdb'</span><span class="va">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>../data/pdb/heme.pdb:ATOM     25 FE           1      -0.924   0.535  -0.518</code></pre>
</div>
<div id="matching-and-subtracting" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="matching-and-subtracting" class="callout-inner">
<h3 class="callout-title">Matching and Subtracting<a class="anchor" aria-label="anchor" href="#matching-and-subtracting"></a>
</h3>
<div class="callout-content">
<p>The <code>-v</code> option to <code>grep</code> inverts pattern
matching, so that only lines which do <em>not</em> match the pattern are
printed. Given that, which of the following commands will find all files
in <code>/data</code> whose names end in <code>s.txt</code> (e.g.,
<code>animals.txt</code> or <code>planets.txt</code>), but do
<em>not</em> contain the word <code>net</code>? Once you have thought
about your answer, you can test the commands in the
<code>data-shell</code> directory.</p>
<ol style="list-style-type: decimal">
<li><code>find data -name '*s.txt' | grep -v net</code></li>
<li><code>find data -name *s.txt | grep -v net</code></li>
<li><code>grep -v "temp" $(find data -name '*s.txt')</code></li>
<li>None of the above.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<p>The correct answer is 1. Putting the match expression in quotes
prevents the shell expanding it, so it gets passed to the
<code>find</code> command.</p>
<p>Option 2 is incorrect because the shell expands <code>*s.txt</code>
instead of passing the wildcard expression to <code>find</code>.</p>
<p>Option 3 is incorrect because it searches the contents of the files
for lines which do not match ‘temp’, rather than searching the file
names.</p>
</div>
</div>
</div>
</div>
<div id="binary-files" class="callout callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="binary-files" class="callout-inner">
<h3 class="callout-title">Binary Files<a class="anchor" aria-label="anchor" href="#binary-files"></a>
</h3>
<div class="callout-content">
<p>We have focused exclusively on finding patterns in text files. What
if your data is stored as images, in databases, or in some other
format?</p>
<p>A handful of tools extend <code>grep</code> to handle a few non text
formats. But a more generalizable approach is to convert the data to
text, or extract the text-like elements from the data. On the one hand,
it makes simple things easy to do. On the other hand, complex things are
usually impossible. For example, it’s easy enough to write a program
that will extract X and Y dimensions from image files for
<code>grep</code> to play with, but how would you write something to
find values in a spreadsheet whose cells contained formulas?</p>
<p>A last option is to recognize that the shell and text processing have
their limits, and to use another programming language. When the time
comes to do this, don’t be too hard on the shell: many modern
programming languages have borrowed a lot of ideas from it, and
imitation is also the sincerest form of praise.</p>
</div>
</div>
</div>
<p>The Unix shell is older than most of the people who use it. It has
survived so long because it is one of the most productive programming
environments ever created — maybe even <em>the</em> most productive. Its
syntax may be cryptic, but people who have mastered it can experiment
with different commands interactively, then use what they have learned
to automate their work. Graphical user interfaces may be better at the
first, but the shell is still unbeaten at the second. And as Alfred
North Whitehead wrote in 1911, ‘Civilization advances by extending the
number of important operations which we can perform without thinking
about them.’</p>
<div id="find-pipeline-reading-comprehension" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="find-pipeline-reading-comprehension" class="callout-inner">
<h3 class="callout-title">
<code>find</code> Pipeline Reading
Comprehension<a class="anchor" aria-label="anchor" href="#find-pipeline-reading-comprehension"></a>
</h3>
<div class="callout-content">
<p>Write a short explanatory comment for the following shell script:</p>
<div class="codewrapper sourceCode" id="cb47">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wc</span> <span class="at">-l</span> <span class="va">$(</span><span class="fu">find</span> . <span class="at">-name</span> <span class="st">'*.dat'</span><span class="va">)</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-n</span></span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" aria-labelledby="headingSolution5" data-bs-parent="#accordionSolution5">
<div class="accordion-body">
<ol style="list-style-type: decimal">
<li>Find all files with a <code>.dat</code> extension recursively from
the current directory</li>
<li>Count the number of lines each of these files contains</li>
<li>Sort the output from step 2. numerically</li>
</ol>
</div>
</div>
</div>
</div>
<div id="finding-files-with-different-properties" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="finding-files-with-different-properties" class="callout-inner">
<h3 class="callout-title">Finding Files With Different Properties<a class="anchor" aria-label="anchor" href="#finding-files-with-different-properties"></a>
</h3>
<div class="callout-content">
<p>The <code>find</code> command can be given several other criteria
known as “tests” to locate files with specific attributes, such as
creation time, size, permissions, or ownership. Use
<code>man find</code> to explore these, and then write a single command
to find all files in or below the current directory that are owned by
the user <code>ahmed</code> and were modified in the last 24 hours.</p>
<p>Hint 1: you will need to use three tests: <code>-type</code>,
<code>-mtime</code>, and <code>-user</code>.</p>
<p>Hint 2: The value for <code>-mtime</code> will need to be
negative—why?</p>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6">
  Show me the solution
  </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" aria-labelledby="headingSolution6" data-bs-parent="#accordionSolution6">
<div class="accordion-body">
<p>Assuming that Nelle’s home is our working directory we type:</p>
<div class="codewrapper sourceCode" id="cb48">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> find ./ <span class="at">-type</span> f <span class="at">-mtime</span> <span class="at">-1</span> <span class="at">-user</span> ahmed</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Keypoints<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul>
<li>
<code>find</code> finds files with specific properties that match
patterns.</li>
<li>
<code>grep</code> selects lines in files that match patterns.</li>
<li>
<code>--help</code> is an option supported by many bash commands,
and programs that can be run from within Bash, to display more
information on how to use these commands or programs.</li>
<li>
<code>man command</code> displays the manual page for a given
command.</li>
<li>
<code>$(command)</code> inserts a command’s output in place.</li>
</ul>
</div>
</div>
</div></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
				<p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/zkamvar/mdf-shell-novice/edit/main/README.md" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/zkamvar/mdf-shell-novice/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a> 
        | <a href="https://github.com/zkamvar/mdf-shell-novice/" class="external-link">Source</a></p>
				<p><a href="https://github.com/zkamvar/mdf-shell-novice/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="../LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p><a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">Template licensed under CC-BY 4.0</a> by <a href="https://carpentries.org" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.14.1" class="external-link">sandpaper (0.14.1)</a>,
        <a href="https://github.com/carpentries/pegboard/tree/0.7.2" class="external-link">pegboard (0.7.2)</a>,
      and <a href="https://github.com/carpentries/varnish/tree/0.3.3" class="external-link">varnish (0.3.3)</a>.</p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
			<i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back to top"></i><br><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://zkamvar.github.io/mdf-shell-novice/instructor/aio.html",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://zkamvar.github.io/mdf-shell-novice/instructor/aio.html",
  "identifier": "https://zkamvar.github.io/mdf-shell-novice/instructor/aio.html",
  "dateCreated": "2023-11-21",
  "dateModified": "2023-11-21",
  "datePublished": "2023-11-21"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

